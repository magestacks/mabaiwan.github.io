<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <title>è°¨æ…ä½¿ç”¨ Java8 æ–°ç‰¹æ€§ ParallelStream | å°é©¬å“¥ã®ä»£ç å®æˆ˜è¯¾</title>
    <meta name="description" content="">
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="icon" href="/assets/xiaomage-logo.JPG">
    <script type="text/javascript" src="/assets/js/push.js"></script>
    <script charset="utf-8" src="https://my.openwrite.cn/js/readmore.js"></script>
    <meta name="description" content="ä¸€ä¸ªä¸æ˜¯åœ¨é€ è½®å­ï¼Œå°±æ˜¯åœ¨é€ è½®å­è·¯ä¸Šçš„ç¨‹åºå‘˜ï¼Œè¿½æ±‚ä¼˜é›…ç¼–ç ã€‚å†™è¿‡åšå®¢ï¼Œå‚ä¸è¿‡å¼€æºé¡¹ç›®ï¼Œçƒ­è¡·äºåŸºç¡€æ¶æ„ã€‚">
    <meta name="referrer" content="never">
    <meta name="keywords" content="antdocs,antdeisgn,vuepress,vuepress-theme,theme,ant,docs,antd,antdocs of vuepress,ä¸»é¢˜,vuepressä¸»é¢˜,antdè®¾è®¡,blog,vuepress-blog">
    <link rel="preload" href="/assets/css/0.styles.b37e4d9f.css" as="style"><link rel="preload" href="/assets/js/app.7eb18571.js" as="script"><link rel="preload" href="/assets/js/2.670b9761.js" as="script"><link rel="preload" href="/assets/js/31.c8fd8006.js" as="script"><link rel="prefetch" href="/assets/js/10.a5a9903d.js"><link rel="prefetch" href="/assets/js/11.5762fdcb.js"><link rel="prefetch" href="/assets/js/12.3d30dbb9.js"><link rel="prefetch" href="/assets/js/13.167f50d8.js"><link rel="prefetch" href="/assets/js/14.73090bec.js"><link rel="prefetch" href="/assets/js/15.c99b25a1.js"><link rel="prefetch" href="/assets/js/16.8e1e672b.js"><link rel="prefetch" href="/assets/js/17.3f44f769.js"><link rel="prefetch" href="/assets/js/18.eb50631d.js"><link rel="prefetch" href="/assets/js/19.b81fb5c1.js"><link rel="prefetch" href="/assets/js/20.9e106839.js"><link rel="prefetch" href="/assets/js/21.899094ac.js"><link rel="prefetch" href="/assets/js/22.20904317.js"><link rel="prefetch" href="/assets/js/23.54f25aab.js"><link rel="prefetch" href="/assets/js/24.9980ebcd.js"><link rel="prefetch" href="/assets/js/25.3068a180.js"><link rel="prefetch" href="/assets/js/26.b9dbabce.js"><link rel="prefetch" href="/assets/js/27.fe33b48c.js"><link rel="prefetch" href="/assets/js/28.53c3669d.js"><link rel="prefetch" href="/assets/js/29.aea97b6c.js"><link rel="prefetch" href="/assets/js/3.f8b3c6d2.js"><link rel="prefetch" href="/assets/js/30.601a6826.js"><link rel="prefetch" href="/assets/js/32.679c3c46.js"><link rel="prefetch" href="/assets/js/33.0632bf2f.js"><link rel="prefetch" href="/assets/js/34.87ee7489.js"><link rel="prefetch" href="/assets/js/35.ae124e8e.js"><link rel="prefetch" href="/assets/js/36.0b5e4932.js"><link rel="prefetch" href="/assets/js/37.241fb3e7.js"><link rel="prefetch" href="/assets/js/38.20592ee2.js"><link rel="prefetch" href="/assets/js/39.bec8855a.js"><link rel="prefetch" href="/assets/js/4.fa07bc29.js"><link rel="prefetch" href="/assets/js/40.19c4f912.js"><link rel="prefetch" href="/assets/js/41.efec0c07.js"><link rel="prefetch" href="/assets/js/5.ac01bbe0.js"><link rel="prefetch" href="/assets/js/6.e506f546.js"><link rel="prefetch" href="/assets/js/7.929e0a1e.js"><link rel="prefetch" href="/assets/js/8.5a319efc.js"><link rel="prefetch" href="/assets/js/9.0dc60c38.js">
    <link rel="stylesheet" href="/assets/css/0.styles.b37e4d9f.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="ant-row"><div class="nav-button"><i aria-label="icon: bars" class="anticon anticon-bars"><svg viewBox="0 0 1024 1024" focusable="false" data-icon="bars" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M912 192H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 284H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 284H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM104 228a56 56 0 1 0 112 0 56 56 0 1 0-112 0zm0 284a56 56 0 1 0 112 0 56 56 0 1 0-112 0zm0 284a56 56 0 1 0 112 0 56 56 0 1 0-112 0z"></path></svg></i> <span></span></div> <div class="ant-col ant-col-xs-24 ant-col-sm-24 ant-col-md-6 ant-col-lg-6 ant-col-xl-5 ant-col-xxl-4"><a href="/" class="router-link-active home-link"><img src="/assets/xiaomage-logo.JPG" alt="å°é©¬å“¥ã®ä»£ç å®æˆ˜è¯¾" class="logo"> <span class="site-name">å°é©¬å“¥ã®ä»£ç å®æˆ˜è¯¾</span></a> <div class="search-box mobile-search"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div></div> <div class="ant-col ant-col-xs-0 ant-col-sm-0 ant-col-md-18 ant-col-lg-18 ant-col-xl-19 ant-col-xxl-20"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><ul role="menu" id="nav" class="ant-menu ant-menu-horizontal ant-menu-root ant-menu-light"><li role="menuitem" class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none;"><div aria-haspopup="true" class="ant-menu-submenu-title"><span>Â·Â·Â·</span><i class="ant-menu-submenu-arrow"></i></div></li><li role="menuitem" class="ant-menu-item"><a href="/" class="router-link-active">
          é¦–é¡µ
        </a></li><li role="menuitem" class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none;"><div aria-haspopup="true" class="ant-menu-submenu-title"><span>Â·Â·Â·</span><i class="ant-menu-submenu-arrow"></i></div></li><li role="menuitem" class="ant-menu-item"><a href="https://sourl.cn/ruwYW4" target="_blank">
          ğŸ¥‡ä»£ç å®æˆ˜è¯¾
          <i aria-label="icon: link" class="anticon anticon-link"><svg viewBox="64 64 896 896" focusable="false" data-icon="link" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M574 665.4a8.03 8.03 0 0 0-11.3 0L446.5 781.6c-53.8 53.8-144.6 59.5-204 0-59.5-59.5-53.8-150.2 0-204l116.2-116.2c3.1-3.1 3.1-8.2 0-11.3l-39.8-39.8a8.03 8.03 0 0 0-11.3 0L191.4 526.5c-84.6 84.6-84.6 221.5 0 306s221.5 84.6 306 0l116.2-116.2c3.1-3.1 3.1-8.2 0-11.3L574 665.4zm258.6-474c-84.6-84.6-221.5-84.6-306 0L410.3 307.6a8.03 8.03 0 0 0 0 11.3l39.7 39.7c3.1 3.1 8.2 3.1 11.3 0l116.2-116.2c53.8-53.8 144.6-59.5 204 0 59.5 59.5 53.8 150.2 0 204L665.3 562.6a8.03 8.03 0 0 0 0 11.3l39.8 39.8c3.1 3.1 8.2 3.1 11.3 0l116.2-116.2c84.5-84.6 84.5-221.5 0-306.1zM610.1 372.3a8.03 8.03 0 0 0-11.3 0L372.3 598.7a8.03 8.03 0 0 0 0 11.3l39.6 39.6c3.1 3.1 8.2 3.1 11.3 0l226.4-226.4c3.1-3.1 3.1-8.2 0-11.3l-39.5-39.6z"></path></svg></i></a></li><li role="menuitem" class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none;"><div aria-haspopup="true" class="ant-menu-submenu-title"><span>Â·Â·Â·</span><i class="ant-menu-submenu-arrow"></i></div></li><li role="menuitem" class="ant-menu-item"><a href="/docs/thread/thread-pool-thread-destroy.html">
          æŠ€æœ¯ç¬”è®°
        </a></li><li role="menuitem" class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="visibility:hidden;position:absolute;"><div aria-haspopup="true" class="ant-menu-submenu-title"><span>Â·Â·Â·</span><i class="ant-menu-submenu-arrow"></i></div></li></ul> <ul class="extra-group"><li><a href="https://github.com/mageeric" target="_blank" rel="noopener noreferrer" class="repo-link"><i aria-label="icon: github" class="anticon anticon-github"><svg viewBox="64 64 896 896" focusable="false" data-icon="github" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M511.6 76.3C264.3 76.2 64 276.4 64 523.5 64 718.9 189.3 885 363.8 946c23.5 5.9 19.9-10.8 19.9-22.2v-77.5c-135.7 15.9-141.2-73.9-150.3-88.9C215 726 171.5 718 184.5 703c30.9-15.9 62.4 4 98.9 57.9 26.4 39.1 77.9 32.5 104 26 5.7-23.5 17.9-44.5 34.7-60.8-140.6-25.2-199.2-111-199.2-213 0-49.5 16.3-95 48.3-131.7-20.4-60.5 1.9-112.3 4.9-120 58.1-5.2 118.5 41.6 123.2 45.3 33-8.9 70.7-13.6 112.9-13.6 42.4 0 80.2 4.9 113.5 13.9 11.3-8.6 67.3-48.8 121.3-43.9 2.9 7.7 24.7 58.3 5.5 118 32.4 36.8 48.9 82.7 48.9 132.3 0 102.2-59 188.1-200 212.9a127.5 127.5 0 0 1 38.1 91v112.5c.8 9 0 17.9 15 17.9 177.1-59.7 304.6-227 304.6-424.1 0-247.2-200.4-447.3-447.5-447.3z"></path></svg></i></a></li> <!----></ul></nav></div></div> <!----></header> <aside class="sidebar"><div><div class="promo"><div id="promo_3"><div class="promo_title">èµåŠ©å•†</div> <button type="button" class="ant-btn ant-btn-primary ant-btn-background-ghost"><span>æˆä¸ºèµåŠ©å•†</span></button></div></div> <div role="separator" id="reset-margin" class="ant-divider ant-divider-horizontal ant-divider-dashed"></div></div>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>å¹¶å‘ç¼–ç¨‹</span> <span class="arrow down"><i aria-label="icon: down" class="anticon anticon-down"><svg viewBox="64 64 896 896" focusable="false" data-icon="down" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M884 256h-75c-5.1 0-9.9 2.5-12.9 6.6L512 654.2 227.9 262.6c-3-4.1-7.8-6.6-12.9-6.6h-75c-6.5 0-10.3 7.4-6.5 12.7l352.6 486.1c12.8 17.6 39 17.6 51.7 0l352.6-486.1c3.9-5.3.1-12.7-6.4-12.7z"></path></svg></i></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/docs/thread/thread-pool-thread-destroy.html" title="JDK çº¿ç¨‹æ± å¦‚ä½•ä¿è¯æ ¸å¿ƒçº¿ç¨‹æ•°ä¸è¢«é”€æ¯" class="sidebar-link">JDK çº¿ç¨‹æ± å¦‚ä½•ä¿è¯æ ¸å¿ƒçº¿ç¨‹æ•°ä¸è¢«é”€æ¯</a></li><li><a href="/docs/thread/thread-pool-runtime-exception.html" title="å¦‚ä½•å¤„ç† JDK çº¿ç¨‹æ± å†…çº¿ç¨‹è¿è¡Œæ—¶å¼‚å¸¸" class="sidebar-link">å¦‚ä½•å¤„ç† JDK çº¿ç¨‹æ± å†…çº¿ç¨‹è¿è¡Œæ—¶å¼‚å¸¸</a></li><li><a href="/docs/thread/java8-parallel-stream.html" aria-current="page" title="è°¨æ…ä½¿ç”¨ Java8 æ–°ç‰¹æ€§ ParallelStream" class="active sidebar-link">è°¨æ…ä½¿ç”¨ Java8 æ–°ç‰¹æ€§ ParallelStream</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>è®¾è®¡æ¨¡å¼</span> <span class="arrow right"><i aria-label="icon: down" class="anticon anticon-down"><svg viewBox="64 64 896 896" focusable="false" data-icon="down" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M884 256h-75c-5.1 0-9.9 2.5-12.9 6.6L512 654.2 227.9 262.6c-3-4.1-7.8-6.6-12.9-6.6h-75c-6.5 0-10.3 7.4-6.5 12.7l352.6 486.1c12.8 17.6 39 17.6 51.7 0l352.6-486.1c3.9-5.3.1-12.7-6.4-12.7z"></path></svg></i></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>åœºæ™¯é—®é¢˜</span> <span class="arrow right"><i aria-label="icon: down" class="anticon anticon-down"><svg viewBox="64 64 896 896" focusable="false" data-icon="down" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M884 256h-75c-5.1 0-9.9 2.5-12.9 6.6L512 654.2 227.9 262.6c-3-4.1-7.8-6.6-12.9-6.6h-75c-6.5 0-10.3 7.4-6.5 12.7l352.6 486.1c12.8 17.6 39 17.6 51.7 0l352.6-486.1c3.9-5.3.1-12.7-6.4-12.7z"></path></svg></i></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>åˆ†å¸ƒå¼ç¯‡</span> <span class="arrow right"><i aria-label="icon: down" class="anticon anticon-down"><svg viewBox="64 64 896 896" focusable="false" data-icon="down" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M884 256h-75c-5.1 0-9.9 2.5-12.9 6.6L512 654.2 227.9 262.6c-3-4.1-7.8-6.6-12.9-6.6h-75c-6.5 0-10.3 7.4-6.5 12.7l352.6 486.1c12.8 17.6 39 17.6 51.7 0l352.6-486.1c3.9-5.3.1-12.7-6.4-12.7z"></path></svg></i></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>æ¡†æ¶å­¦ä¹ </span> <span class="arrow right"><i aria-label="icon: down" class="anticon anticon-down"><svg viewBox="64 64 896 896" focusable="false" data-icon="down" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M884 256h-75c-5.1 0-9.9 2.5-12.9 6.6L512 654.2 227.9 262.6c-3-4.1-7.8-6.6-12.9-6.6h-75c-6.5 0-10.3 7.4-6.5 12.7l352.6 486.1c12.8 17.6 39 17.6 51.7 0l352.6-486.1c3.9-5.3.1-12.7-6.4-12.7z"></path></svg></i></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>è¯»ä¹¦ç¬”è®°</span> <span class="arrow right"><i aria-label="icon: down" class="anticon anticon-down"><svg viewBox="64 64 896 896" focusable="false" data-icon="down" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M884 256h-75c-5.1 0-9.9 2.5-12.9 6.6L512 654.2 227.9 262.6c-3-4.1-7.8-6.6-12.9-6.6h-75c-6.5 0-10.3 7.4-6.5 12.7l352.6 486.1c12.8 17.6 39 17.6 51.7 0l352.6-486.1c3.9-5.3.1-12.7-6.4-12.7z"></path></svg></i></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-antdocs-content content__default"><h1 id="è°¨æ…ä½¿ç”¨-java8-æ–°ç‰¹æ€§-parallelstream">è°¨æ…ä½¿ç”¨ Java8 æ–°ç‰¹æ€§ parallelStream <a href="#è°¨æ…ä½¿ç”¨-java8-æ–°ç‰¹æ€§-parallelstream" class="header-anchor">#</a></h1> <p>åœ¨è¯´ parallelStream ä¹‹å‰, ä¸€å®šè¦äº†è§£ Stream ä»¥åŠå®ƒçš„åŸºæœ¬æ“ä½œ</p> <h2 id="ä»€ä¹ˆæ˜¯-parallelstream">ä»€ä¹ˆæ˜¯ ParallelStream <a href="#ä»€ä¹ˆæ˜¯-parallelstream" class="header-anchor">#</a></h2> <p>ä¸Šæ–‡è®²åˆ°çš„ Java8 Stream æµåœ¨æ‰§è¡Œæ—¶å€™æ˜¯ä¸²è¡ŒåŒ–çš„, å¦‚æœè¯´ä»»åŠ¡æ‰§è¡Œçš„è€—æ—¶æ¯”è¾ƒé•¿, å¯ä»¥ä½¿ç”¨ Stream çš„ &quot;å…„å¼Ÿæµ&quot; ParallelStream</p> <blockquote><p>é˜²æ­¢è¯¯å¯¼, å¹¶éè€—æ—¶å°±ä¸€å®šè¦ä½¿ç”¨å¹¶è¡Œ, æ ¹æ®ä¸åŒçš„ä¸šåŠ¡åœºæ™¯, åˆç†çš„ä½¿ç”¨å³å¯</p></blockquote> <p>parallelStream æ˜¯ä¸€ç§å¹¶è¡Œæµ, æ„æ€ä¸ºå¤„ç†ä»»åŠ¡æ—¶å¹¶è¡Œå¤„ç†, è¿™é‡Œå’Œå¹¶å‘ç¼–ç¨‹å°±æœ‰äº†åƒä¸ä¸‡ç¼•çš„å…³ç³»</p> <blockquote><p>å‰ææ˜¯ç¡¬ä»¶æ”¯æŒ, å¦‚æœå•æ ¸ CPU, åªä¼šå­˜åœ¨å¹¶å‘å¤„ç†, è€Œä¸ä¼šå¹¶è¡Œ</p></blockquote> <p>è¿™ç¯‡æ–‡ç« ä¸»è¦æ˜¯è¯´æ˜ ParallelStream å…¶ä¸­ä¸€ä¸ªå¯èƒ½ä¸ºæˆä¸ºåŸ‹é›·çš„ç‚¹</p> <p><strong>é¡¹ç›®ä¸­ä¸šåŠ¡ä½¿ç”¨çš„å¹¶è¡ŒæµçœŸçš„ä¼šéƒ½å¹¶è¡Œå¤„ç†ä¹ˆ?</strong></p> <h2 id="å¦‚ä½•ä½¿ç”¨-parallelstream">å¦‚ä½•ä½¿ç”¨ ParallelStream <a href="#å¦‚ä½•ä½¿ç”¨-parallelstream" class="header-anchor">#</a></h2> <p>ParallelStream åœ¨ä½¿ç”¨ä¸Šä¸ Stream æ— åŒºåˆ«, æœ¬è´¨è¿”å›çš„éƒ½æ˜¯ä¸€ä¸ªæµ, åªä¸è¿‡åº•å±‚å¤„ç†æ—¶ <strong>æ ¹æ®æ¡ä»¶åˆ¤æ–­æ˜¯å¹¶è¡Œæˆ–è€…æ˜¯ä¸²è¡Œ</strong></p> <p><img src="https://images-machen.oss-cn-beijing.aliyuncs.com/%E5%B9%B6%E8%A1%8C%E6%B5%81%E6%B5%8B%E8%AF%95_new.gif" alt=""></p> <p>å¹¶è¡Œæµå¹¶ä¸ä¼šæŒ‰ç…§åŸæœ¬çš„é¡ºåºè½¨è¿¹æ‰§è¡Œ, è€Œæ˜¯ <strong>éšæœºæ‰§è¡Œ,</strong> å½“ç„¶å¯¹äºè¿™ç§ forEach è¾“å‡ºä¹Ÿå¯ä»¥åšåˆ°é¡ºåºä¸²è¡Œ, ä½†è¿™ä¸ªä¸åœ¨æ–‡ç« ä¸­çš„é‡ç‚¹</p> <h2 id="forkjoinpool">ForkJoinPool <a href="#forkjoinpool" class="header-anchor">#</a></h2> <p>ç›¸ä¿¡å¦‚æœåœ¨é¡¹ç›®ä¸­å®é™…ä½¿ç”¨è¿‡å¹¶è¡Œæµçš„å°ä¼™ä¼´, ä¸€å®šä¼šçŸ¥é“ ForkJoinPool</p> <p>æ²¡é”™, å¹¶è¡Œæµåº•å±‚å°±æ˜¯ä½¿ç”¨çš„ ForkJoinPool, ä¸€ç§ <strong>å·¥ä½œçªƒå–ç®—æ³•çº¿ç¨‹æ± </strong></p> <p>ForkJoinPool çš„ä¼˜åŠ¿åœ¨äº, <strong>å¯ä»¥å……åˆ†åˆ©ç”¨å¤š CPU çš„ä¼˜åŠ¿</strong>ï¼ŒæŠŠä¸€ä¸ªä»»åŠ¡æ‹†åˆ†æˆå¤šä¸ª&quot;å°ä»»åŠ¡&quot;, æŠŠå¤šä¸ª&quot;å°ä»»åŠ¡&quot;æ”¾åˆ°å¤šä¸ªå¤„ç†å™¨æ ¸å¿ƒä¸Šå¹¶è¡Œæ‰§è¡Œ; å½“å¤šä¸ª&quot;å°ä»»åŠ¡&quot;æ‰§è¡Œå®Œæˆä¹‹å, å†å°†è¿™äº›æ‰§è¡Œç»“æœåˆå¹¶èµ·æ¥</p> <h2 id="å¹¶è¡Œæµçš„é™·é˜±">å¹¶è¡Œæµçš„é™·é˜± <a href="#å¹¶è¡Œæµçš„é™·é˜±" class="header-anchor">#</a></h2> <h3 id="_1-çº¿ç¨‹å®‰å…¨é—®é¢˜">1. çº¿ç¨‹å®‰å…¨é—®é¢˜ <a href="#_1-çº¿ç¨‹å®‰å…¨é—®é¢˜" class="header-anchor">#</a></h3> <p>åªè¦æ˜¯å¹¶è¡Œå¤„ç†, å¦‚æœåœ¨æµç¨‹ä¸­çš„æ“ä½œäº§ç”Ÿäº†ç«æ€æ¡ä»¶, å°±ä¼šå­˜åœ¨çº¿ç¨‹å®‰å…¨é—®é¢˜</p> <p>è¿™é‡Œä¸¾ä¸ªä¾‹å­è¿›è¡Œè¯´æ˜å…·ä½“é—®é¢˜</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> integerList <span class="token operator">=</span> <span class="token class-name">Lists</span><span class="token punctuation">.</span><span class="token function">newArrayList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> strList <span class="token operator">=</span> <span class="token class-name">Lists</span><span class="token punctuation">.</span><span class="token function">newArrayList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">int</span> practicalSize <span class="token operator">=</span> <span class="token number">1000000</span><span class="token punctuation">;</span>

    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> practicalSize<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        strList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    strList<span class="token punctuation">.</span><span class="token function">parallelStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>each <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
        integerList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token function">parseInt</span><span class="token punctuation">(</span>each<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;  &gt;&gt;&gt; integerList é¢„è®¡é•¿åº¦ :: {}&quot;</span><span class="token punctuation">,</span> practicalSize<span class="token punctuation">)</span><span class="token punctuation">;</span>
    log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;  &gt;&gt;&gt; integerList å®é™…é•¿åº¦ :: {}&quot;</span><span class="token punctuation">,</span> integerList<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">/**
 * &gt;&gt;&gt; integerList é¢„ä¼°é•¿åº¦ :: 1000000
 * &gt;&gt;&gt; integerList å®é™…é•¿åº¦ :: 211195
 */</span>
</code></pre></div><p>ä¸Šé¢è¿™æ®µç¨‹åºè¿è¡Œæµç¨‹è¯´æ˜å¦‚ä¸‹:</p> <p>1ã€åˆ›å»ºäº†ä¸¤ä¸ª List, åˆ†åˆ«æ˜¯ Stringã€Integer ç±»å‹</p> <p>2ã€å‘ strList æ’å…¥ 1000000 æ¡è®°å½•</p> <p>3ã€ä½¿ç”¨å¹¶è¡Œæµå°† strList ä¸­çš„æ•°æ®æ ¼å¼åŒ–ä¸º Integer å¹¶æ·»åŠ åˆ° integerList</p> <p>4ã€è¾“å‡º integerList é¢„è®¡é•¿åº¦ä»¥åŠå®é™…é•¿åº¦</p> <p>æ­£å¸¸æƒ…å†µä¸‹, æˆ‘ä»¬æ˜¯å¸Œæœ› integerList æœ€ç»ˆè¾“å‡º 1000000</p> <p>ä½†æ˜¯ä¼šå› ä¸ºå¹¶è¡Œæµå¤„ç†æ˜¯å¤šçº¿ç¨‹æ“ä½œ, æ‰€ä»¥ä¼šå¯¼è‡´ ArrayList çš„çº¿ç¨‹ä¸å®‰å…¨</p> <p>ç¤ºä¾‹ä¸­å®é™…é•¿åº¦å¹¶ä¸å›ºå®š, æ ¹æ® CPU çš„å…·ä½“å¤„ç†é€Ÿåº¦è€Œå®š</p> <p><strong>è§£å†³æ–¹å¼</strong></p> <p>å¦‚æœé¡¹ç›®ä¸­ç¡®å®æœ‰ä¸Šè¿°ä»£ç çš„éœ€æ±‚, å¯ä»¥é€‰æ‹©ä½¿ç”¨ <strong>Vector ç±»ã€Colletions å°è£…ã€JUC ç±»</strong></p> <blockquote><p>æ—¢ç„¶ä½¿ç”¨äº†å¹¶è¡Œå¤„ç†, æ‰€ä»¥å¯¹äºæ€§èƒ½è¿˜æ˜¯æœ‰ä¸€å®šè¦æ±‚, æ‰€ä»¥è¿™ä¸€å—å®¹å™¨åå‘äº JUC</p></blockquote> <h3 id="_2-ä»€ä¹ˆæƒ…å†µä¸‹éƒ½ä¼šå¹¶è¡Œä¹ˆ">2. ä»€ä¹ˆæƒ…å†µä¸‹éƒ½ä¼šå¹¶è¡Œä¹ˆ <a href="#_2-ä»€ä¹ˆæƒ…å†µä¸‹éƒ½ä¼šå¹¶è¡Œä¹ˆ" class="header-anchor">#</a></h3> <p>è¿™ä¸ªé—®é¢˜, ä¹Ÿå°±æ˜¯æœ¬æ–‡çš„é‡ç‚¹, å°æœ¬æœ¬åšå¥½ç¬”è®°</p> <p>é¦–å…ˆæˆ‘ä»¬å…ˆå°†èƒ½è°ƒç”¨å¹¶è¡Œæµçš„ API è¿›è¡Œç½—åˆ—</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> stringList <span class="token operator">=</span> <span class="token class-name">Lists</span><span class="token punctuation">.</span><span class="token function">newArrayList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    stringList<span class="token punctuation">.</span><span class="token function">parallelStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    stringList<span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">parallel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Stream</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span>stringList<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">parallel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span>
</code></pre></div><p>è™½ç„¶ API çš„è°ƒç”¨æ–¹å¼ä¸åŒ, ä½†æ˜¯åº•å±‚éƒ½æ˜¯å°† <strong>AbstractPipeline ä¸­çš„ parallel æ ‡è¯†è®¾ç½®ä¸º true</strong></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token class-name">S</span> <span class="token function">parallel</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  	sourceStage<span class="token punctuation">.</span>parallel <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
  	<span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token class-name">S</span><span class="token punctuation">)</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>è¿™å°±ä¼šå¼•å‡ºä¸€ä¸ªé—®é¢˜, è°ƒç”¨è¿™ä¸‰ç§ä¸åŒçš„å¹¶è¡Œæµ API, <strong>åº•å±‚æ˜¯ä½¿ç”¨çš„åŒä¸€ä¸ª ForkJoinPool ä¹ˆ?</strong></p> <p>é¦–å…ˆæˆ‘ä»¬çœ‹ä¸€ä¸‹ ForkJoinPool æ˜¯å¦‚ä½•è¢«åˆå§‹åŒ–çš„</p> <p>å¹¶è¡Œæµä¸­ä½¿ç”¨åˆ°çš„æ˜¯ ForkJoinPool å†…éƒ¨ä¸€ä¸ªé™æ€å˜é‡å±æ€§</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">ForkJoinPool</span> common<span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">ForkJoinPool</span> <span class="token function">commonPool</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// assert common != null : &quot;static init error&quot;;</span>
    <span class="token keyword">return</span> common<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>ForkJoinPool é™æ€å—è´Ÿè´£åˆå§‹åŒ– common</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">static</span> <span class="token punctuation">{</span>
    <span class="token comment">// initialize field offsets for CAS etc</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
        <span class="token class-name">U</span> <span class="token operator">=</span> <span class="token class-name"><span class="token namespace">sun<span class="token punctuation">.</span>misc<span class="token punctuation">.</span></span>Unsafe</span><span class="token punctuation">.</span><span class="token function">getUnsafe</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> k <span class="token operator">=</span> <span class="token class-name">ForkJoinPool</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">;</span>
        CTL <span class="token operator">=</span> <span class="token class-name">U</span><span class="token punctuation">.</span>objectFieldOffset
                <span class="token punctuation">(</span>k<span class="token punctuation">.</span><span class="token function">getDeclaredField</span><span class="token punctuation">(</span><span class="token string">&quot;ctl&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        RUNSTATE <span class="token operator">=</span> <span class="token class-name">U</span><span class="token punctuation">.</span>objectFieldOffset
                <span class="token punctuation">(</span>k<span class="token punctuation">.</span><span class="token function">getDeclaredField</span><span class="token punctuation">(</span><span class="token string">&quot;runState&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        STEALCOUNTER <span class="token operator">=</span> <span class="token class-name">U</span><span class="token punctuation">.</span>objectFieldOffset
                <span class="token punctuation">(</span>k<span class="token punctuation">.</span><span class="token function">getDeclaredField</span><span class="token punctuation">(</span><span class="token string">&quot;stealCounter&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> tk <span class="token operator">=</span> <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">;</span>
        PARKBLOCKER <span class="token operator">=</span> <span class="token class-name">U</span><span class="token punctuation">.</span>objectFieldOffset
                <span class="token punctuation">(</span>tk<span class="token punctuation">.</span><span class="token function">getDeclaredField</span><span class="token punctuation">(</span><span class="token string">&quot;parkBlocker&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> wk <span class="token operator">=</span> <span class="token class-name">WorkQueue</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">;</span>
        QTOP <span class="token operator">=</span> <span class="token class-name">U</span><span class="token punctuation">.</span>objectFieldOffset
                <span class="token punctuation">(</span>wk<span class="token punctuation">.</span><span class="token function">getDeclaredField</span><span class="token punctuation">(</span><span class="token string">&quot;top&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        QLOCK <span class="token operator">=</span> <span class="token class-name">U</span><span class="token punctuation">.</span>objectFieldOffset
                <span class="token punctuation">(</span>wk<span class="token punctuation">.</span><span class="token function">getDeclaredField</span><span class="token punctuation">(</span><span class="token string">&quot;qlock&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        QSCANSTATE <span class="token operator">=</span> <span class="token class-name">U</span><span class="token punctuation">.</span>objectFieldOffset
                <span class="token punctuation">(</span>wk<span class="token punctuation">.</span><span class="token function">getDeclaredField</span><span class="token punctuation">(</span><span class="token string">&quot;scanState&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        QPARKER <span class="token operator">=</span> <span class="token class-name">U</span><span class="token punctuation">.</span>objectFieldOffset
                <span class="token punctuation">(</span>wk<span class="token punctuation">.</span><span class="token function">getDeclaredField</span><span class="token punctuation">(</span><span class="token string">&quot;parker&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        QCURRENTSTEAL <span class="token operator">=</span> <span class="token class-name">U</span><span class="token punctuation">.</span>objectFieldOffset
                <span class="token punctuation">(</span>wk<span class="token punctuation">.</span><span class="token function">getDeclaredField</span><span class="token punctuation">(</span><span class="token string">&quot;currentSteal&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        QCURRENTJOIN <span class="token operator">=</span> <span class="token class-name">U</span><span class="token punctuation">.</span>objectFieldOffset
                <span class="token punctuation">(</span>wk<span class="token punctuation">.</span><span class="token function">getDeclaredField</span><span class="token punctuation">(</span><span class="token string">&quot;currentJoin&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> ak <span class="token operator">=</span> <span class="token class-name">ForkJoinTask</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">;</span>
        ABASE <span class="token operator">=</span> <span class="token class-name">U</span><span class="token punctuation">.</span><span class="token function">arrayBaseOffset</span><span class="token punctuation">(</span>ak<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span> scale <span class="token operator">=</span> <span class="token class-name">U</span><span class="token punctuation">.</span><span class="token function">arrayIndexScale</span><span class="token punctuation">(</span>ak<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>scale <span class="token operator">&amp;</span> <span class="token punctuation">(</span>scale <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token number">0</span><span class="token punctuation">)</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">&quot;data type scale not a power of two&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        ASHIFT <span class="token operator">=</span> <span class="token number">31</span> <span class="token operator">-</span> <span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token function">numberOfLeadingZeros</span><span class="token punctuation">(</span>scale<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    commonMaxSpares <span class="token operator">=</span> DEFAULT_COMMON_MAX_SPARES<span class="token punctuation">;</span>
    defaultForkJoinWorkerThreadFactory <span class="token operator">=</span>
            <span class="token keyword">new</span> <span class="token class-name">ForkJoinPool<span class="token punctuation">.</span>DefaultForkJoinWorkerThreadFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    modifyThreadPermission <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RuntimePermission</span><span class="token punctuation">(</span><span class="token string">&quot;modifyThread&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  	<span class="token comment">// åˆ›å»ºForkJoinPool</span>
    common <span class="token operator">=</span> <span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>security<span class="token punctuation">.</span></span>AccessController</span><span class="token punctuation">.</span>doPrivileged
            <span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>security<span class="token punctuation">.</span></span>PrivilegedAction</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">ForkJoinPool</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">public</span> <span class="token class-name">ForkJoinPool</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token keyword">return</span> <span class="token function">makeCommonPool</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> par <span class="token operator">=</span> common<span class="token punctuation">.</span>config <span class="token operator">&amp;</span> SMASK<span class="token punctuation">;</span> <span class="token comment">// report 1 even if threads disabled</span>
    commonParallelism <span class="token operator">=</span> par <span class="token operator">&gt;</span> <span class="token number">0</span> <span class="token operator">?</span> par <span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>é€šè¿‡ä¸‹é¢åˆå§‹åŒ–ä»£ç å¯ä»¥çœ‹åˆ°, parallelismã€threadFactoryã€exceptionHandler å¯ä»¥è¿›è¡Œåˆå§‹ä¸ªæ€§åŒ–é…ç½®</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">ForkJoinPool</span> <span class="token function">makeCommonPool</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">int</span> parallelism <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token class-name">ForkJoinPool<span class="token punctuation">.</span>ForkJoinWorkerThreadFactory</span> factory <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token class-name">Thread<span class="token punctuation">.</span>UncaughtExceptionHandler</span> handler <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>  <span class="token comment">// ignore exceptions in accessing/parsing properties</span>
        <span class="token class-name">String</span> pp <span class="token operator">=</span> <span class="token class-name">System</span><span class="token punctuation">.</span>getProperty
                <span class="token punctuation">(</span><span class="token string">&quot;java.util.concurrent.ForkJoinPool.common.parallelism&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> fp <span class="token operator">=</span> <span class="token class-name">System</span><span class="token punctuation">.</span>getProperty
                <span class="token punctuation">(</span><span class="token string">&quot;java.util.concurrent.ForkJoinPool.common.threadFactory&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> hp <span class="token operator">=</span> <span class="token class-name">System</span><span class="token punctuation">.</span>getProperty
                <span class="token punctuation">(</span><span class="token string">&quot;java.util.concurrent.ForkJoinPool.common.exceptionHandler&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>pp <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
            parallelism <span class="token operator">=</span> <span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token function">parseInt</span><span class="token punctuation">(</span>pp<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>fp <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
            factory <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">ForkJoinPool<span class="token punctuation">.</span>ForkJoinWorkerThreadFactory</span><span class="token punctuation">)</span> <span class="token class-name">ClassLoader</span><span class="token punctuation">.</span>
                    <span class="token function">getSystemClassLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">loadClass</span><span class="token punctuation">(</span>fp<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">newInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>hp <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
            handler <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">Thread<span class="token punctuation">.</span>UncaughtExceptionHandler</span><span class="token punctuation">)</span> <span class="token class-name">ClassLoader</span><span class="token punctuation">.</span>
                    <span class="token function">getSystemClassLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">loadClass</span><span class="token punctuation">(</span>hp<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">newInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> ignore<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>factory <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">getSecurityManager</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
            factory <span class="token operator">=</span> defaultForkJoinWorkerThreadFactory<span class="token punctuation">;</span>
        <span class="token keyword">else</span> <span class="token comment">// use security-managed default</span>
            factory <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ForkJoinPool<span class="token punctuation">.</span>InnocuousForkJoinWorkerThreadFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>parallelism <span class="token operator">&lt;</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> <span class="token comment">// default 1 less than #cores</span>
            <span class="token punctuation">(</span>parallelism <span class="token operator">=</span> <span class="token class-name">Runtime</span><span class="token punctuation">.</span><span class="token function">getRuntime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">availableProcessors</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">)</span>
        parallelism <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>parallelism <span class="token operator">&gt;</span> MAX_CAP<span class="token punctuation">)</span>
        parallelism <span class="token operator">=</span> MAX_CAP<span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">ForkJoinPool</span><span class="token punctuation">(</span>parallelism<span class="token punctuation">,</span> factory<span class="token punctuation">,</span> handler<span class="token punctuation">,</span> LIFO_QUEUE<span class="token punctuation">,</span>
            <span class="token string">&quot;ForkJoinPool.commonPool-worker-&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>åˆ›å»º ForkJoinPool å®ä¾‹å†…éƒ¨çº¿ç¨‹æ€»æ•° parallelism é»˜è®¤ä¸º: <strong>å½“å‰è¿è¡Œç¯å¢ƒçš„ CPU æ ¸æ•° - 1</strong></p> <p>è¿™ä¸€ç‚¹å¾ˆé‡è¦, å’Œä¸‹é¢è®²åˆ°çš„å¹¶è¡Œæµå·¥ä½œæ–¹å¼æœ‰å¾ˆå¤§å…³ç³»</p> <p>çœ‹åˆ°è¿™é‡Œå°ä¼™ä¼´åº”è¯¥å°±ä¼šæ˜ç™½äº†</p> <p><strong>ç¨‹åºä¸­ä½¿ç”¨çš„å¹¶è¡Œæµ, ä½¿ç”¨çš„éƒ½æ˜¯ ForkJoinPool ä¸­çš„é™æ€å˜é‡ common</strong></p> <p>è¿™é‡Œç»§ç»­çœ‹æœ¬èŠ‚æå‡ºçš„é—®é¢˜, é¡¹ç›®ä¸­ä½¿ç”¨äº†å¹¶è¡Œæµçš„ä»£ç , çœŸçš„èƒ½å¤Ÿè¾¾åˆ°å¹¶è¡Œä¹ˆ?</p> <p>è¿™é‡Œå…ˆè´´ä¸€ä¸‹æµ‹è¯•ä»£ç , æ„Ÿå…´è¶£çš„å°ä¼™ä¼´å¯ä»¥æœ¬åœ°ä¹Ÿè¯•è¯•</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">InterruptedException</span> <span class="token punctuation">{</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">&quot;  &gt;&gt;&gt; ç”µè„‘ CPU å¹¶è¡Œå¤„ç†çº¿ç¨‹æ•° :: %s, å¹¶è¡Œæµå…¬å…±çº¿ç¨‹æ± å†…çº¿ç¨‹æ•° :: %s&quot;</span><span class="token punctuation">,</span>
            <span class="token class-name">Runtime</span><span class="token punctuation">.</span><span class="token function">getRuntime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">availableProcessors</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token class-name">ForkJoinPool</span><span class="token punctuation">.</span><span class="token function">commonPool</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getParallelism</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> stringList <span class="token operator">=</span> <span class="token class-name">Lists</span><span class="token punctuation">.</span><span class="token function">newArrayList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> stringList2 <span class="token operator">=</span> <span class="token class-name">Lists</span><span class="token punctuation">.</span><span class="token function">newArrayList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">13</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> stringList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">3</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> stringList2<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
        stringList<span class="token punctuation">.</span><span class="token function">parallelStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>each <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot; å¼€å§‹æ‰§è¡Œ :: &quot;</span> <span class="token operator">+</span> each<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">try</span> <span class="token punctuation">{</span>
                <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">6000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&quot;å­çº¿ç¨‹-1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">1500</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
        stringList2<span class="token punctuation">.</span><span class="token function">parallelStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>each <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot; :: &quot;</span> <span class="token operator">+</span> each<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">try</span> <span class="token punctuation">{</span>
                <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&quot;å­çº¿ç¨‹-2&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>ä¸ºäº†æ¨¡æ‹Ÿé¡¹ç›®ä¸­æ­£å¼ä½¿ç”¨åœºæ™¯, æµ‹è¯•ä»£ç è¯´æ˜å¦‚ä¸‹:</p> <p>1ã€&quot;å­çº¿ç¨‹-1&quot; ã€&quot;å­çº¿ç¨‹-2&quot; åˆ†åˆ«ä»£è¡¨é¡¹ç›®ä¸­ä¸¤ä¸ªä¸åŒçš„ä¸šåŠ¡ä½¿ç”¨å¹¶è¡Œæµ</p> <p>2ã€ æœåŠ¡å™¨åŒæ—¶åªèƒ½ä¿è¯ 12 çº¿ç¨‹å¹¶å‘, åˆå§‹åŒ–æ—¶å…¬å…±çš„ ForkJoinPool å†…å¹¶è¡Œåº¦æ˜¯ 11</p> <p>3ã€&quot;å­çº¿ç¨‹-1&quot; ä¸šåŠ¡æ¯”è¾ƒè€—æ—¶, ç®—ä¸Šæ‰§è¡Œçº¿ç¨‹ä»¥åŠçº¿ç¨‹æ± å†…çš„çº¿ç¨‹, å¹¶å‘èƒ½è·‘ 12 ä¸ªä»»åŠ¡</p> <p>4ã€å¦‚æœ &quot;å­çº¿ç¨‹-1&quot; å°†çº¿ç¨‹æ± æ‰€æœ‰å¹¶è¡Œè·‘æ»¡, &quot;å­çº¿ç¨‹-2&quot; å†è¿è¡Œå¹¶è¡Œæµæœ‰ä»€ä¹ˆç»“æœ?</p> <p>è·‘ä¸€ä¸‹æµ‹è¯•ç¨‹åº, çœ‹çœ‹ä¼šå‘ç”Ÿä»€ä¹ˆäº‹æƒ…</p> <p><img src="https://images-machen.oss-cn-beijing.aliyuncs.com/%E5%B9%B6%E8%A1%8C%E6%89%A7%E8%A1%8C_new.gif" alt=""></p> <p>è¿™é‡Œè¯´æ˜ä¸‹è¿è¡Œå›¾çš„è¿‡ç¨‹è¯´æ˜:</p> <p>1ã€å¯ä»¥çœ‹åˆ°æäº¤ä»»åŠ¡çš„çº¿ç¨‹ä¹Ÿå‚ä¸åˆ°äº†ä»»åŠ¡æ‰§è¡Œä¸­</p> <p>2ã€å› ä¸ºæˆ‘ä»¬å…¬å…±çš„ ForkJoinPool å¹¶è¡Œæ˜¯ 11, åŠ ä¸Šæäº¤ä»»åŠ¡çš„çº¿ç¨‹ä¸€å…±æ˜¯ 12, ä½†æ˜¯æˆ‘ä»¬ &quot;å­çº¿ç¨‹-1&quot; å…±éœ€æ‰§è¡Œ 13 ä¸ªä»»åŠ¡</p> <p>3ã€åœ¨ &quot;å­çº¿ç¨‹-1&quot; ä¸­çš„ä»»åŠ¡å°†çº¿ç¨‹ç¡çœ , æ¨¡æ‹Ÿä»»åŠ¡è€—æ—¶, æ‰€ä»¥ &quot;å­çº¿ç¨‹-1&quot; ä¼šå°†å…¬å…±çº¿ç¨‹æ± è·‘æ»¡çš„åŒæ—¶, è¿˜ä¼šé—ç•™ä¸€ä¸ªä»»åŠ¡</p> <p>4ã€å› ä¸º &quot;å­çº¿ç¨‹-1&quot; å°†ä»»åŠ¡è·‘æ»¡, æ‰€ä»¥ &quot;å­çº¿ç¨‹-2&quot; åœ¨æ‰§è¡Œçš„æ—¶å€™, <strong>ä¸èƒ½è¿›è¡Œå¹¶è¡Œå¤„ç†</strong>, åªèƒ½ä¾é æäº¤ä»»åŠ¡çº¿ç¨‹æ‰§è¡Œ</p> <p>5ã€åœ¨ &quot;å­çº¿ç¨‹-1&quot; çš„ 12 ä¸ªä»»åŠ¡ç»“æŸè¿è¡Œå, ä¼šå†å°†å‰©ä½™çš„ä¸€ä¸ªä»»åŠ¡ç»§ç»­æ‰§è¡Œ</p> <p><strong>é—®é¢˜æ€»ç»“</strong></p> <p>é€šè¿‡ä¸Šé¢çš„æµ‹è¯•ç¨‹åºå¾—çŸ¥: åœ¨é¡¹ç›®ä¸­ä½¿ç”¨äº†å¹¶è¡ŒæµçœŸæ­£æ‰§è¡Œæ—¶, <strong>å¹¶éä¸€å®šæ˜¯å¹¶è¡Œçš„</strong></p> <p>å› ä¸ºå¦‚æœé¡¹ç›®ä¸­å…¶å®ƒå¹¶è¡Œæµçš„ä»»åŠ¡æ‰§è¡Œè€—æ—¶, ä¼šå æ®å¯¹åº”èµ„æº, ä½¿å¾—æœ€åè¿˜æ˜¯é€šè¿‡ä¸»çº¿ç¨‹æ‰§è¡Œä»»åŠ¡</p> <p>æ‰€ä»¥æˆ‘ä»¬åœ¨ä½¿ç”¨å¹¶è¡Œæµä¹‹å‰ä¸€å®šè¦è€ƒè™‘ä»¥ä¸‹é—®é¢˜:</p> <p>1ã€ä¸šåŠ¡åœºæ™¯æ˜¯å¦çœŸçš„éœ€è¦å¹¶è¡Œå¤„ç†?</p> <p>2ã€å¹¶è¡Œå¤„ç†ä»»åŠ¡æ˜¯å¦æ˜¯ç›¸å¯¹ç‹¬ç«‹? æ˜¯å¦ä¼šå¼•èµ·å¹¶è¡Œé—´çš„ç«æ€æ¡ä»¶?</p> <p>3ã€å¹¶è¡Œå¤„ç†æ˜¯å¦ä¾èµ–ä»»åŠ¡çš„æ‰§è¡Œé¡ºåº?</p> <p>é’ˆå¯¹è¿™ä¸‰ä¸ªé—®é¢˜, å¦‚æœä¸šåŠ¡èƒ½å¤Ÿæ»¡è¶³ä½¿ç”¨åœºæ™¯, å¹¶ä¸”æœ‰å¯¹åº”çš„è§£å†³ç­–ç•¥, å¹¶è¡Œç¡®å®æ˜¯èƒ½å¤Ÿæå‡ç›¸å½“ä¸€éƒ¨åˆ†æ€§èƒ½</p> <h2 id="parallelstream-æ€»ç»“">ParallelStream æ€»ç»“ <a href="#parallelstream-æ€»ç»“" class="header-anchor">#</a></h2> <p>æ–‡ç« ä¸»è¦æè¿°äº†ä»€ä¹ˆæ˜¯ ParallerStream æ˜¯ä»€ä¹ˆ</p> <p><strong>ä¸€ç§æä¾›äº†å¹¶è¡Œè®¡ç®—çš„æµå¼å¤„ç†</strong></p> <p>ParallerStream åº•å±‚æ˜¯é€šè¿‡ä»€ä¹ˆæŠ€æœ¯è·å¾—å¹¶è¡Œè®¡ç®—</p> <p><strong>ForkJoinPool, é»˜è®¤å¹¶è¡Œèƒ½åŠ›ä¸º Runtime.getRuntime().availableProcessors() - 1, å¯ä»¥é€šè¿‡å‚æ•°æŒ‡å®šé‡å†™</strong></p> <p>å¹¶è¡Œæµå­˜åœ¨çš„ä¸€äº›é—®é¢˜, å…¶å®ä¹Ÿå¯ä»¥è¯´æ˜¯å¹¶å‘ç¼–ç¨‹å­˜åœ¨çš„é—®é¢˜</p> <p><strong>çº¿ç¨‹å®‰å…¨æ€§é—®é¢˜åŠåœºæ™¯æ˜¯å¦é€‚ç”¨å¹¶è¡Œå¤„ç†</strong></p> <p>æ€»è€Œè¨€ä¹‹, å¹¶è¡Œå¤„ç†åœ¨åˆé€‚çš„åœºæ™¯è¿˜æ˜¯å¯ä»¥ä½¿ç”¨çš„</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev"><a href="/docs/thread/thread-pool-runtime-exception.html" class="prev"><i aria-label="icon: left" class="anticon anticon-left"><svg viewBox="64 64 896 896" focusable="false" data-icon="left" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M724 218.3V141c0-6.7-7.7-10.4-12.9-6.3L260.3 486.8a31.86 31.86 0 0 0 0 50.3l450.8 352.1c5.3 4.1 12.9.4 12.9-6.3v-77.3c0-4.9-2.3-9.6-6.1-12.6l-360-281 360-281.1c3.8-3 6.1-7.7 6.1-12.6z"></path></svg></i>
        å¦‚ä½•å¤„ç† JDK çº¿ç¨‹æ± å†…çº¿ç¨‹è¿è¡Œæ—¶å¼‚å¸¸
      </a></span> <span class="next"><a href="/docs/design/spring-guava-observer.html">
        Springã€Guava æ¡†æ¶å¦‚ä½•è®¾è®¡è§‚å¯Ÿè€…æ¨¡å¼ï¼Ÿ
        <i aria-label="icon: right" class="anticon anticon-right"><svg viewBox="64 64 896 896" focusable="false" data-icon="right" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M765.7 486.8L314.9 134.7A7.97 7.97 0 0 0 302 141v77.3c0 4.9 2.3 9.6 6.1 12.6l360 281.1-360 281.1c-3.9 3-6.1 7.7-6.1 12.6V883c0 6.7 7.7 10.4 12.9 6.3l450.8-352.1a31.96 31.96 0 0 0 0-50.4z"></path></svg></i></a></span></p></div> <!----> </main> <!----></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.7eb18571.js" defer></script><script src="/assets/js/2.670b9761.js" defer></script><script src="/assets/js/31.c8fd8006.js" defer></script>
  </body>
</html>