(window.webpackJsonp=window.webpackJsonp||[]).push([[27],{805:function(t,s,a){"use strict";a.r(s);var n=a(118),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"å¦‚ä½•ä¿è¯ä½¿ç”¨-mybatis-æŸ¥è¯¢åƒä¸‡æ•°æ®é‡ä¸å‘ç”Ÿå†…å­˜æº¢å‡º"}},[t._v("å¦‚ä½•ä¿è¯ä½¿ç”¨ MyBatisï¼ŒæŸ¥è¯¢åƒä¸‡æ•°æ®é‡ä¸å‘ç”Ÿå†…å­˜æº¢å‡ºï¼Ÿ "),a("a",{staticClass:"header-anchor",attrs:{href:"#å¦‚ä½•ä¿è¯ä½¿ç”¨-mybatis-æŸ¥è¯¢åƒä¸‡æ•°æ®é‡ä¸å‘ç”Ÿå†…å­˜æº¢å‡º"}},[t._v("#")])]),t._v(" "),a("p",[t._v("ç”±äºç°åœ¨ ORM æ¡†æ¶çš„æˆç†Ÿè¿ç”¨ï¼Œå¾ˆå¤šå°ä¼™ä¼´å¯¹äº JDBC çš„æ¦‚å¿µæœ‰äº›è–„å¼±ï¼Œ"),a("strong",[t._v("ORM æ¡†æ¶åº•å±‚å…¶å®æ˜¯é€šè¿‡ JDBC æ“ä½œçš„ DB")])]),t._v(" "),a("p",[a("strong",[t._v("JDBC")]),t._v("ï¼ˆJavaDataBase Connectivityï¼‰æ˜¯ Java æ•°æ®åº“è¿æ¥, è¯´çš„ç›´ç™½ç‚¹å°±æ˜¯ä½¿ç”¨ "),a("strong",[t._v("Java è¯­è¨€æ“ä½œæ•°æ®åº“")])]),t._v(" "),a("p",[a("strong",[t._v("ç”± SUN å…¬å¸æä¾›å‡ºä¸€å¥—è®¿é—®æ•°æ®åº“çš„è§„èŒƒ API")]),t._v("ï¼Œ å¹¶æä¾›ç›¸å¯¹åº”çš„è¿æ¥æ•°æ®åº“åè®®æ ‡å‡†ï¼Œ ç„¶å "),a("strong",[t._v("å„å‚å•†æ ¹æ®è§„èŒƒæä¾›ä¸€å¥—è®¿é—®è‡ªå®¶æ•°æ®åº“çš„ API æ¥å£")])]),t._v(" "),a("p",[t._v("æ–‡ç« å¤§æ•°æ®é‡æ“ä½œæ ¸å¿ƒå›´ç»• JDBC å±•å¼€ï¼Œç›®å½•ç»“æ„å¦‚ä¸‹ï¼š")]),t._v(" "),a("blockquote",[a("ul",[a("li",[t._v("MySQL JDBC å¤§æ•°æ®é‡æ“ä½œ\n"),a("ul",[a("li",[t._v("å¸¸è§„æŸ¥è¯¢")]),t._v(" "),a("li",[t._v("æµå¼æŸ¥è¯¢")]),t._v(" "),a("li",[t._v("æ¸¸æ ‡æŸ¥è¯¢")]),t._v(" "),a("li",[t._v("JDBC RowData")]),t._v(" "),a("li",[t._v("JDBC é€šä¿¡åŸç†")])])]),t._v(" "),a("li",[t._v("æµå¼æ¸¸æ ‡å†…å­˜åˆ†æ\n"),a("ul",[a("li",[t._v("å•æ¬¡è°ƒç”¨å†…å­˜ä½¿ç”¨")]),t._v(" "),a("li",[t._v("å¹¶å‘è°ƒç”¨å†…å­˜ä½¿ç”¨")])])]),t._v(" "),a("li",[t._v("MyBatis å¦‚ä½•ä½¿ç”¨æµå¼æŸ¥è¯¢")]),t._v(" "),a("li",[t._v("ç»“è¨€")])])]),t._v(" "),a("h2",{attrs:{id:"mysql-jdbc-å¤§æ•°æ®é‡æ“ä½œ"}},[t._v("MySql JDBC å¤§æ•°æ®é‡æ“ä½œ "),a("a",{staticClass:"header-anchor",attrs:{href:"#mysql-jdbc-å¤§æ•°æ®é‡æ“ä½œ"}},[t._v("#")])]),t._v(" "),a("p",[t._v("æ•´ç¯‡æ–‡ç« ä»¥å¤§æ•°æ®é‡æ“ä½œä¸ºè®®é¢˜ï¼Œé€šè¿‡å¼€å‘è¿‡ç¨‹ä¸­çš„éœ€æ±‚å¼•å‡ºç›¸å…³çŸ¥è¯†ç‚¹")]),t._v(" "),a("ol",[a("li",[t._v("è¿ç§»æ•°æ®")]),t._v(" "),a("li",[t._v("å¯¼å‡ºæ•°æ®")]),t._v(" "),a("li",[t._v("æ‰¹é‡å¤„ç†æ•°æ®")])]),t._v(" "),a("p",[t._v("ä¸€èˆ¬è€Œè¨€ç¬”è€…è®¤ä¸ºåœ¨ Java Web ç¨‹åºé‡Œï¼Œèƒ½å¤Ÿè¢«ç§°ä¸ºå¤§æ•°æ®é‡çš„ï¼Œå‡ åä¸‡åˆ°åƒä¸‡ä¸ç­‰ï¼Œå†é«˜çš„è¯ Javaï¼ˆWEB åº”ç”¨ï¼‰å¤„ç†å°±ä¸æ€ä¹ˆåˆé€‚äº†")]),t._v(" "),a("p",[t._v("ä¸¾ä¸ªä¾‹å­ï¼Œç°åœ¨ä¸šåŠ¡ç³»ç»Ÿéœ€è¦ä» MySQL æ•°æ®åº“é‡Œè¯»å– 500w æ•°æ®è¡Œè¿›è¡Œå¤„ç†ï¼Œåº”è¯¥æ€ä¹ˆåš")]),t._v(" "),a("ol",[a("li",[t._v("å¸¸è§„æŸ¥è¯¢ï¼Œä¸€æ¬¡æ€§è¯»å– 500w æ•°æ®åˆ° JVM å†…å­˜ä¸­ï¼Œæˆ–è€…åˆ†é¡µè¯»å–")]),t._v(" "),a("li",[t._v("æµå¼æŸ¥è¯¢ï¼Œå»ºç«‹é•¿è¿æ¥ï¼Œåˆ©ç”¨æœåŠ¡ç«¯æ¸¸æ ‡ï¼Œæ¯æ¬¡è¯»å–ä¸€æ¡åŠ è½½åˆ° JVM å†…å­˜")]),t._v(" "),a("li",[t._v("æ¸¸æ ‡æŸ¥è¯¢ï¼Œå’Œæµå¼ä¸€æ ·ï¼Œé€šè¿‡ fetchSize å‚æ•°ï¼Œæ§åˆ¶ä¸€æ¬¡è¯»å–å¤šå°‘æ¡æ•°æ®")])]),t._v(" "),a("h3",{attrs:{id:"å¸¸è§„æŸ¥è¯¢"}},[t._v("å¸¸è§„æŸ¥è¯¢ "),a("a",{staticClass:"header-anchor",attrs:{href:"#å¸¸è§„æŸ¥è¯¢"}},[t._v("#")])]),t._v(" "),a("p",[t._v("é»˜è®¤æƒ…å†µä¸‹ï¼Œå®Œæ•´çš„æ£€ç´¢ç»“æœé›†ä¼šå°†å…¶å­˜å‚¨åœ¨å†…å­˜ä¸­ã€‚åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œè¿™æ˜¯æœ€æœ‰æ•ˆçš„æ“ä½œæ–¹å¼ï¼Œå¹¶ä¸”ç”±äº MySQL ç½‘ç»œåè®®çš„è®¾è®¡ï¼Œå› æ­¤æ›´æ˜“äºå®ç°")]),t._v(" "),a("p",[t._v("å‡è®¾å•è¡¨ 500w æ•°æ®é‡ï¼Œæ²¡æœ‰äººä¼šä¸€æ¬¡æ€§åŠ è½½åˆ°å†…å­˜ä¸­ï¼Œä¸€èˆ¬ä¼šé‡‡ç”¨åˆ†é¡µçš„æ–¹å¼")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@SneakyThrows")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Override")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("pageQuery")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Cleanup")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Connection")]),t._v(" conn "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" dataSource"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getConnection")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Cleanup")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Statement")]),t._v(" stmt "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" conn"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("createStatement")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("long")]),t._v(" start "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("currentTimeMillis")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("long")]),t._v(" offset "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" size "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("100")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("while")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" sql "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("format")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"SELECT COLUMN_A, COLUMN_B, COLUMN_C FROM YOU_TABLE LIMIT %s, %s"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" offset"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" size"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Cleanup")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ResultSet")]),t._v(" rs "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" stmt"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("executeQuery")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("sql"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("long")]),t._v(" count "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("loopResultSet")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("rs"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("count "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("break")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        offset "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+=")]),t._v(" size"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    log"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("info")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"  ğŸš€ğŸš€ğŸš€ åˆ†é¡µæŸ¥è¯¢è€—æ—¶ :: {} "')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("currentTimeMillis")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" start"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("ä¸Šè¿°æ–¹å¼æ¯”è¾ƒç®€å•ï¼Œä½†æ˜¯åœ¨ä¸è€ƒè™‘ LIMIT æ·±åˆ†é¡µä¼˜åŒ–æƒ…å†µä¸‹ï¼Œçº¿ä¸Šæ•°æ®åº“æœåŠ¡å™¨å°±å‡‰äº†ï¼Œ"),a("strong",[t._v("äº¦æˆ–è€…ä½ èƒ½ç­‰ä¸ªå‡ å¤©æ—¶é—´æ£€ç´¢æ•°æ®")])]),t._v(" "),a("blockquote",[a("p",[a("a",{attrs:{href:"https://mp.weixin.qq.com/s/i3wLeCSxqWKrTwgtfelumQ",target:"_blank",rel:"noopener noreferrer"}},[t._v("MySQL åƒä¸‡æ•°æ®é‡æ·±åˆ†é¡µä¼˜åŒ–, æ‹’ç»çº¿ä¸Šæ•…éšœï¼"),a("OutboundLink")],1)])]),t._v(" "),a("h3",{attrs:{id:"æµå¼æŸ¥è¯¢"}},[t._v("æµå¼æŸ¥è¯¢ "),a("a",{staticClass:"header-anchor",attrs:{href:"#æµå¼æŸ¥è¯¢"}},[t._v("#")])]),t._v(" "),a("p",[t._v("å¦‚æœä½ æ­£åœ¨ä½¿ç”¨å…·æœ‰å¤§é‡æ•°æ®è¡Œçš„ ResultSetï¼Œå¹¶ä¸”æ— æ³•åœ¨ JVM ä¸­ä¸ºå…¶åˆ†é…æ‰€éœ€çš„å†…å­˜å †ç©ºé—´ï¼Œåˆ™å¯ä»¥å‘Šè¯‰é©±åŠ¨ç¨‹åºä»ç»“æœæµä¸­è¿”å›ä¸€è¡Œ")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://images-machen.oss-cn-beijing.aliyuncs.com/image-20201229104940364.png",alt:""}})]),t._v(" "),a("p",[t._v("æµå¼æŸ¥è¯¢æœ‰ä¸€ç‚¹éœ€è¦æ³¨æ„ï¼š"),a("strong",[t._v("å¿…é¡»å…ˆè¯»å–ï¼ˆæˆ–å…³é—­ï¼‰ç»“æœé›†ä¸­çš„æ‰€æœ‰è¡Œ")]),t._v("ï¼Œç„¶åæ‰èƒ½å¯¹è¿æ¥å‘å‡ºä»»ä½•å…¶ä»–æŸ¥è¯¢ï¼Œå¦åˆ™å°†å¼•å‘å¼‚å¸¸")]),t._v(" "),a("p",[t._v("ä½¿ç”¨æµå¼æŸ¥è¯¢ï¼Œåˆ™è¦ä¿æŒå¯¹äº§ç”Ÿç»“æœé›†çš„è¯­å¥æ‰€å¼•ç”¨çš„è¡¨çš„å¹¶å‘è®¿é—®ï¼Œå› ä¸ºå…¶ "),a("strong",[t._v("æŸ¥è¯¢ä¼šç‹¬å è¿æ¥ï¼Œæ‰€ä»¥å¿…é¡»å°½å¿«å¤„ç†")])]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@SneakyThrows")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("streamQuery")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Cleanup")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Connection")]),t._v(" conn "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" dataSource"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getConnection")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Cleanup")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Statement")]),t._v(" stmt "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" conn"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("createStatement")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ResultSet")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("TYPE_FORWARD_ONLY"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ResultSet")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("CONCUR_READ_ONLY"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    stmt"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setFetchSize")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Integer")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("MIN_VALUE"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  \t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("long")]),t._v(" start "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("currentTimeMillis")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Cleanup")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ResultSet")]),t._v(" rs "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" stmt"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("executeQuery")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"SELECT COLUMN_A, COLUMN_B, COLUMN_C FROM YOU_TABLE"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("loopResultSet")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("rs"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    log"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("info")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"  ğŸš€ğŸš€ğŸš€ æµå¼æŸ¥è¯¢è€—æ—¶ :: {} "')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("currentTimeMillis")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" start"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1000")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("æµå¼æŸ¥è¯¢åº“è¡¨æ•°æ®é‡ 500w å•æ¬¡è°ƒç”¨æ—¶é—´æ¶ˆè€—ï¼š"),a("strong",[t._v("â‰ˆ 6s")])]),t._v(" "),a("h3",{attrs:{id:"æ¸¸æ ‡æŸ¥è¯¢"}},[t._v("æ¸¸æ ‡æŸ¥è¯¢ "),a("a",{staticClass:"header-anchor",attrs:{href:"#æ¸¸æ ‡æŸ¥è¯¢"}},[t._v("#")])]),t._v(" "),a("p",[t._v("SpringBoot 2.x ç‰ˆæœ¬é»˜è®¤è¿æ¥æ± ä¸º HikariPoolï¼Œè¿æ¥å¯¹è±¡æ˜¯ HikariProxyConnectionï¼Œæ‰€ä»¥ä¸‹è¿°è®¾ç½®æ¸¸æ ‡æ–¹å¼å°±ä¸å¯è¡Œäº†")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("JDBC4Connection")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" conn"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setUseCursorFetch")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("éœ€è¦åœ¨æ•°æ®åº“è¿æ¥ä¿¡æ¯é‡Œæ‹¼æ¥ "),a("strong",[t._v("&useCursorFetch=true")]),t._v("ã€‚å…¶æ¬¡è®¾ç½® Statement æ¯æ¬¡è¯»å–æ•°æ®æ•°é‡ï¼Œæ¯”å¦‚ä¸€æ¬¡è¯»å– 1000")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@SneakyThrows")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("cursorQuery")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Cleanup")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Connection")]),t._v(" conn "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" dataSource"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getConnection")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Cleanup")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Statement")]),t._v(" stmt "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" conn"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("createStatement")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ResultSet")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("TYPE_FORWARD_ONLY"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ResultSet")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("CONCUR_READ_ONLY"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    stmt"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setFetchSize")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1000")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("long")]),t._v(" start "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("currentTimeMillis")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Cleanup")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ResultSet")]),t._v(" rs "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" stmt"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("executeQuery")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"SELECT COLUMN_A, COLUMN_B, COLUMN_C FROM YOU_TABLE"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("loopResultSet")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("rs"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    log"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("info")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"  ğŸš€ğŸš€ğŸš€ æ¸¸æ ‡æŸ¥è¯¢è€—æ—¶ :: {} "')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("currentTimeMillis")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" start"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1000")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("æ¸¸æ ‡æŸ¥è¯¢åº“è¡¨æ•°æ®é‡ 500w å•æ¬¡è°ƒç”¨æ—¶é—´æ¶ˆè€—ï¼š"),a("strong",[t._v("â‰ˆ 18s")])]),t._v(" "),a("h3",{attrs:{id:"jdbc-rowdata"}},[t._v("JDBC RowData "),a("a",{staticClass:"header-anchor",attrs:{href:"#jdbc-rowdata"}},[t._v("#")])]),t._v(" "),a("p",[t._v("ä¸Šé¢éƒ½ä½¿ç”¨åˆ°äº†æ–¹æ³• loopResultSetï¼Œæ–¹æ³•å†…éƒ¨åªæ˜¯è¿›è¡Œäº† while å¾ªç¯ï¼Œå¸¸è§„ã€æµå¼ã€æ¸¸æ ‡æŸ¥è¯¢çš„æ ¸å¿ƒç‚¹åœ¨äº next æ–¹æ³•")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@SneakyThrows")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Long")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("loopResultSet")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ResultSet")]),t._v(" rs"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("while")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("rs"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("next")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t\t\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ä¸šåŠ¡æ“ä½œ")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" xx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("ResultSet.next() çš„é€»è¾‘æ˜¯å®ç°ç±» ResultSetImpl æ¯æ¬¡éƒ½ä» RowData è·å–ä¸‹ä¸€è¡Œçš„æ•°æ®ã€‚RowData æ˜¯ä¸€ä¸ªæ¥å£ï¼Œå®ç°å…³ç³»å›¾å¦‚ä¸‹")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://images-machen.oss-cn-beijing.aliyuncs.com/image-20201230102449708.png",alt:""}})]),t._v(" "),a("p",[t._v("é»˜è®¤æƒ…å†µä¸‹ ResultSet ä¼šä½¿ç”¨ RowDataStatic å®ä¾‹ï¼Œåœ¨ç”Ÿæˆ RowDataStatic å¯¹è±¡æ—¶å°±ä¼šæŠŠ ResultSet ä¸­æ‰€æœ‰è®°å½•è¯»åˆ°å†…å­˜é‡Œï¼Œä¹‹åé€šè¿‡ next() å†ä¸€æ¡æ¡ä»å†…å­˜ä¸­è¯»")]),t._v(" "),a("p",[t._v("RowDataCursor çš„è°ƒç”¨ä¸ºæ‰¹å¤„ç†ï¼Œç„¶åè¿›è¡Œå†…éƒ¨ç¼“å­˜ï¼Œæµç¨‹å¦‚ä¸‹ï¼š")]),t._v(" "),a("ol",[a("li",[t._v("é¦–å…ˆä¼šæŸ¥çœ‹è‡ªå·±å†…éƒ¨ç¼“å†²åŒºæ˜¯å¦æœ‰æ•°æ®æ²¡æœ‰è¿”å›ï¼Œå¦‚æœæœ‰åˆ™è¿”å›ä¸‹ä¸€è¡Œ")]),t._v(" "),a("li",[t._v("å¦‚æœéƒ½è¯»å–å®Œæ¯•ï¼Œå‘ MySQL Server è§¦å‘ä¸€ä¸ªæ–°çš„è¯·æ±‚è¯»å– fetchSize æ•°é‡ç»“æœ")]),t._v(" "),a("li",[t._v("å¹¶å°†è¿”å›ç»“æœç¼“å†²åˆ°å†…éƒ¨ç¼“å†²åŒºï¼Œç„¶åè¿”å›ç¬¬ä¸€è¡Œæ•°æ®")])]),t._v(" "),a("p",[t._v("å½“é‡‡ç”¨æµå¼å¤„ç†æ—¶ï¼Œ"),a("strong",[t._v("ResultSet ä½¿ç”¨çš„æ˜¯ RowDataDynamic å¯¹è±¡")]),t._v("ï¼Œè€Œè¿™ä¸ªå¯¹è±¡ next() æ¯æ¬¡è°ƒç”¨éƒ½ä¼šå‘èµ· IO è¯»å–å•è¡Œæ•°æ®")]),t._v(" "),a("p",[t._v("æ€»ç»“æ¥è¯´å°±æ˜¯ï¼Œ"),a("strong",[t._v("é»˜è®¤çš„ RowDataStatic è¯»å–å…¨éƒ¨æ•°æ®åˆ°å®¢æˆ·ç«¯å†…å­˜ä¸­")]),t._v("ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬çš„ JVMï¼›"),a("strong",[t._v("RowDataCursor ä¸€æ¬¡è¯»å– fetchSize è¡Œ")]),t._v("ï¼Œæ¶ˆè´¹å®Œæˆå†å‘èµ·è¯·æ±‚è°ƒç”¨ï¼›"),a("strong",[t._v("RowDataDynamic æ¯æ¬¡ IO è°ƒç”¨è¯»å–ä¸€æ¡æ•°æ®")])]),t._v(" "),a("h3",{attrs:{id:"jdbc-é€šä¿¡åŸç†"}},[t._v("JDBC é€šä¿¡åŸç† "),a("a",{staticClass:"header-anchor",attrs:{href:"#jdbc-é€šä¿¡åŸç†"}},[t._v("#")])]),t._v(" "),a("h4",{attrs:{id:"æ™®é€šæŸ¥è¯¢"}},[t._v("æ™®é€šæŸ¥è¯¢ "),a("a",{staticClass:"header-anchor",attrs:{href:"#æ™®é€šæŸ¥è¯¢"}},[t._v("#")])]),t._v(" "),a("p",[t._v("åœ¨ JDBC ä¸ MySQL æœåŠ¡ç«¯çš„äº¤äº’æ˜¯é€šè¿‡ Socket å®Œæˆçš„ï¼Œå¯¹åº”åˆ°ç½‘ç»œç¼–ç¨‹ï¼Œå¯ä»¥æŠŠ "),a("strong",[t._v("MySQL å½“ä½œä¸€ä¸ª SocketServer")]),t._v("ï¼Œå› æ­¤ä¸€ä¸ªå®Œæ•´çš„è¯·æ±‚é“¾è·¯åº”è¯¥æ˜¯ï¼š")]),t._v(" "),a("blockquote",[a("p",[t._v("JDBC å®¢æˆ·ç«¯ -> å®¢æˆ·ç«¯ Socket -> MySQL -> æ£€ç´¢æ•°æ®è¿”å› -> MySQL å†…æ ¸ Socket ç¼“å†²åŒº -> ç½‘ç»œ -> å®¢æˆ·ç«¯ Socket Buffer -> JDBC å®¢æˆ·ç«¯")])]),t._v(" "),a("p",[t._v("æ™®é€šæŸ¥è¯¢çš„æ–¹å¼åœ¨æŸ¥è¯¢å¤§æ•°æ®é‡æ—¶ï¼Œæ‰€åœ¨ JVM å¯èƒ½ä¼šå‡‰å‡‰ï¼ŒåŸå› å¦‚ä¸‹ï¼š")]),t._v(" "),a("ol",[a("li",[t._v("MySQL Server ä¼šå°†æ£€ç´¢å‡ºçš„ SQL ç»“æœé›†é€šè¿‡è¾“å‡ºæµå†™å…¥åˆ°å†…æ ¸å¯¹åº”çš„ Socket Buffer")]),t._v(" "),a("li",[a("strong",[t._v("å†…æ ¸ç¼“å†²åŒºé€šè¿‡ JDBC å‘èµ·çš„ TCP é“¾è·¯è¿›è¡Œå›ä¼ æ•°æ®")]),t._v("ï¼Œæ­¤æ—¶æ•°æ®ä¼šå…ˆè¿›å…¥ JDBC å®¢æˆ·ç«¯æ‰€åœ¨å†…æ ¸ç¼“å†²åŒº")]),t._v(" "),a("li",[t._v("JDBC å‘èµ· SQL æ“ä½œåï¼Œç¨‹åºä¼šè¢«é˜»å¡åœ¨è¾“å…¥æµçš„ read æ“ä½œä¸Šï¼Œå½“ç¼“å†²åŒºæœ‰æ•°æ®æ—¶ï¼Œç¨‹åºä¼šè¢«å”¤é†’è¿›è€Œå°†ç¼“å†²åŒºæ•°æ®è¯»å–åˆ° JVM å†…å­˜ä¸­")]),t._v(" "),a("li",[t._v("MySQL Server ä¼šä¸æ–­å‘é€æ•°æ®ï¼ŒJDBC ä¸æ–­è¯»å–ç¼“å†²åŒºæ•°æ®åˆ° Java å†…å­˜ä¸­ï¼Œ"),a("strong",[t._v("è™½ç„¶æ­¤æ—¶æ•°æ®å·²åˆ° JDBC æ‰€åœ¨ç¨‹åºæœ¬åœ°ï¼Œä½†æ˜¯ JDBC è¿˜æ²¡æœ‰å¯¹ execute æ–¹æ³•è°ƒç”¨å¤„è¿›è¡Œå“åº”")]),t._v("ï¼Œå› ä¸ºéœ€è¦ç­‰åˆ°å¯¹åº”æ•°æ®è¯»å–å®Œæ¯•æ‰ä¼šè¿”å›")]),t._v(" "),a("li",[t._v("å¼Šç«¯å°±æ˜¾è€Œæ˜“è§äº†ï¼Œå¦‚æœæŸ¥è¯¢æ•°æ®é‡è¿‡å¤§ï¼Œä¼šä¸æ–­ç»å† GCï¼Œç„¶åå°±æ˜¯å†…å­˜æº¢å‡º")])]),t._v(" "),a("h4",{attrs:{id:"æ¸¸æ ‡æŸ¥è¯¢-2"}},[t._v("æ¸¸æ ‡æŸ¥è¯¢ "),a("a",{staticClass:"header-anchor",attrs:{href:"#æ¸¸æ ‡æŸ¥è¯¢-2"}},[t._v("#")])]),t._v(" "),a("p",[t._v("é€šè¿‡ä¸Šæ–‡å¾—çŸ¥ï¼Œæ¸¸æ ‡å¯ä»¥è§£å†³æ™®é€šæŸ¥è¯¢å¤§æ•°æ®é‡çš„å†…å­˜æº¢å‡ºé—®é¢˜ï¼Œä½†æ˜¯")]),t._v(" "),a("p",[t._v("å°ä¼™ä¼´æœ‰æ²¡æœ‰æ€è€ƒè¿‡è¿™ä¹ˆä¸€ä¸ªé—®é¢˜ï¼Œ"),a("strong",[t._v("MySQL ä¸çŸ¥é“å®¢æˆ·ç«¯ç¨‹åºä½•æ—¶æ¶ˆè´¹å®Œæˆï¼Œæ­¤æ—¶å¦ä¸€è¿æ¥å¯¹è¯¥è¡¨é€ æˆ DML å†™å…¥æ“ä½œåº”è¯¥å¦‚ä½•å¤„ç†ï¼Ÿ")])]),t._v(" "),a("p",[t._v("å…¶å®ï¼Œåœ¨æˆ‘ä»¬ä½¿ç”¨æ¸¸æ ‡æŸ¥è¯¢æ—¶ï¼ŒMySQL éœ€è¦å»ºç«‹ä¸€ä¸ªä¸´æ—¶ç©ºé—´æ¥å­˜æ”¾éœ€è¦è¢«è¯»å–çš„æ•°æ®ï¼Œ"),a("strong",[t._v("æ‰€ä»¥ä¸ä¼šå’Œ DML å†™å…¥æ“ä½œäº§ç”Ÿå†²çª")])]),t._v(" "),a("p",[t._v("ä½†æ˜¯æ¸¸æ ‡æŸ¥è¯¢ä¼šå¼•å‘ä»¥ä¸‹ç°è±¡ï¼š")]),t._v(" "),a("ol",[a("li",[a("strong",[t._v("IOPS é£™å‡")]),t._v("ï¼Œå› ä¸ºéœ€è¦è¿”å›çš„æ•°æ®éœ€è¦å†™å…¥åˆ°ä¸´æ—¶ç©ºé—´ä¸­ï¼Œ"),a("strong",[t._v("å­˜åœ¨å¤§é‡çš„ IO è¯»å–å’Œå†™å…¥")]),t._v("ï¼Œæ­¤æµç¨‹å¯èƒ½ä¼šå¼•èµ·å…¶å®ƒä¸šåŠ¡çš„å†™å…¥æŠ–åŠ¨")]),t._v(" "),a("li",[a("strong",[t._v("ç£ç›˜ç©ºé—´é£™å‡")]),t._v("ï¼Œå› ä¸ºå†™å…¥ä¸´æ—¶ç©ºé—´çš„æ•°æ®æ˜¯åœ¨åŸè¡¨ä¹‹å¤–çš„ï¼Œå¦‚æœè¡¨æ•°æ®è¿‡å¤§ï¼Œ"),a("strong",[t._v("æç«¯æƒ…å†µä¸‹å¯èƒ½ä¼šå¯¼è‡´æ•°æ®åº“ç£ç›˜å†™æ»¡")]),t._v("ï¼Œè¿™æ—¶ç½‘ç»œè¾“å‡ºæ—¶æ²¡æœ‰å˜åŒ–çš„ã€‚è€Œå†™å…¥ä¸´æ—¶ç©ºé—´çš„æ•°æ®ä¼šåœ¨ "),a("strong",[t._v("è¯»å–å®Œæˆæˆ–å®¢æˆ·ç«¯å‘èµ· ResultSet#close æ“ä½œæ—¶ç”± MySQL å›æ”¶")])]),t._v(" "),a("li",[t._v("å®¢æˆ·ç«¯ JDBC å‘èµ· SQL æŸ¥è¯¢ï¼Œå¯èƒ½ä¼šæœ‰é•¿æ—¶é—´ç­‰å¾… SQL å“åº”ï¼Œè¿™æ®µæ—¶é—´ä¸ºæœåŠ¡ç«¯å‡†å¤‡æ•°æ®é˜¶æ®µã€‚ä½†æ˜¯ "),a("strong",[t._v("æ™®é€šæŸ¥è¯¢ç­‰å¾…æ—¶é—´ä¸æ¸¸æ ‡æŸ¥è¯¢ç­‰å¾…æ—¶é—´åŸç†ä¸Šæ˜¯ä¸ä¸€è‡´çš„")]),t._v("ï¼Œå‰è€…æ˜¯ä¸€è‡´åœ¨è¯»å–ç½‘ç»œç¼“å†²åŒºçš„æ•°æ®ï¼Œæ²¡æœ‰å“åº”åˆ°ä¸šåŠ¡å±‚é¢ï¼›åè€…æ˜¯ MySQL åœ¨å‡†å¤‡ä¸´æ—¶æ•°æ®ç©ºé—´ï¼Œæ²¡æœ‰å“åº”åˆ° JDBC")]),t._v(" "),a("li",[t._v("æ•°æ®å‡†å¤‡å®Œæˆåï¼Œè¿›è¡Œåˆ°ä¼ è¾“æ•°æ®é˜¶æ®µï¼Œ"),a("strong",[t._v('ç½‘ç»œå“åº”å¼€å§‹é£™å‡ï¼ŒIOPS ç”±"è¯»å†™"è½¬å˜ä¸º"è¯»å–"')])])]),t._v(" "),a("p",[t._v("é‡‡ç”¨æ¸¸æ ‡æŸ¥è¯¢çš„æ–¹å¼ "),a("strong",[t._v("é€šä¿¡æ•ˆç‡æ¯”è¾ƒä½")]),t._v("ï¼Œå› ä¸ºå®¢æˆ·ç«¯æ¶ˆè´¹å®Œ fetchSize è¡Œæ•°æ®ï¼Œå°±éœ€è¦å‘èµ·è¯·æ±‚åˆ°æœåŠ¡ç«¯è¯·æ±‚ï¼Œåœ¨æ•°æ®åº“å‰æœŸå‡†å¤‡é˜¶æ®µ "),a("strong",[t._v("IOPS ä¼šéå¸¸é«˜ï¼Œå ç”¨å¤§é‡çš„ç£ç›˜ç©ºé—´ä»¥åŠæ€§èƒ½")])]),t._v(" "),a("h4",{attrs:{id:"æµå¼æŸ¥è¯¢-2"}},[t._v("æµå¼æŸ¥è¯¢ "),a("a",{staticClass:"header-anchor",attrs:{href:"#æµå¼æŸ¥è¯¢-2"}},[t._v("#")])]),t._v(" "),a("p",[t._v("å½“å®¢æˆ·ç«¯ä¸ MySQL Server ç«¯å»ºç«‹èµ·è¿æ¥å¹¶ä¸”äº¤äº’æŸ¥è¯¢æ—¶ï¼ŒMySQL Server ä¼šé€šè¿‡è¾“å‡ºæµå°† SQL ç»“æœé›†è¿”å›è¾“å‡ºï¼Œä¹Ÿå°±æ˜¯ "),a("strong",[t._v("å‘æœ¬åœ°çš„å†…æ ¸å¯¹åº”çš„ Socket Buffer ä¸­å†™å…¥æ•°æ®")]),t._v("ï¼Œç„¶åå°†å†…æ ¸ä¸­çš„æ•°æ®é€šè¿‡ TCP é“¾è·¯å›ä¼ æ•°æ®åˆ° JDBC å¯¹åº”çš„æœåŠ¡å™¨å†…æ ¸ç¼“å†²åŒº")]),t._v(" "),a("ol",[a("li",[t._v("JDBC é€šè¿‡è¾“å…¥æµ read æ–¹æ³•å»è¯»å–å†…æ ¸ç¼“å†²åŒºæ•°æ®ï¼Œå› ä¸ºå¼€å¯äº†æµå¼è¯»å–ï¼Œæ¯æ¬¡ä¸šåŠ¡ç¨‹åºæ¥æ”¶åˆ°çš„æ•°æ®åªæœ‰ä¸€æ¡")]),t._v(" "),a("li",[t._v("MySQL æœåŠ¡ç«¯ä¼šå‘ JDBC ä»£è¡¨çš„å®¢æˆ·ç«¯å†…æ ¸æºæºä¸æ–­çš„è¾“é€æ•°æ®ï¼Œç›´åˆ°å®¢æˆ·ç«¯è¯·æ±‚ Socket ç¼“å†²åŒºæ»¡ï¼Œè¿™æ—¶çš„ MySQL æœåŠ¡ç«¯ä¼šé˜»å¡")]),t._v(" "),a("li",[t._v("å¯¹äº JDBC å®¢æˆ·ç«¯è€Œè¨€ï¼Œæ•°æ®æ¯æ¬¡è¯»å–éƒ½æ˜¯ä»æœ¬æœºå™¨çš„å†…æ ¸ç¼“å†²åŒºï¼Œæ‰€ä»¥æ€§èƒ½ä¼šæ›´å¿«ä¸€äº›ï¼Œä¸€èˆ¬æƒ…å†µä¸å¿…æ‹…å¿ƒæœ¬æœºå†…æ ¸æ— æ•°æ®æ¶ˆè´¹ï¼ˆé™¤é MySQL æœåŠ¡ç«¯ä¼ é€’æ¥çš„æ•°æ®ï¼Œåœ¨å®¢æˆ·ç«¯ä¸åšä»»ä½•ä¸šåŠ¡é€»è¾‘ï¼Œæ‹¿åˆ°æ•°æ®ç›´æ¥æ”¾å¼ƒï¼Œä¼šå‘ç”Ÿå®¢æˆ·ç«¯æ¶ˆè´¹æ¯”æœåŠ¡ç«¯è¶…å‰çš„æƒ…å†µï¼‰")])]),t._v(" "),a("p",[t._v("çœ‹èµ·æ¥ï¼Œæµå¼è¦æ¯”æ¸¸æ ‡çš„æ–¹å¼æ›´å¥½ä¸€äº›ï¼Œ"),a("strong",[t._v("ä½†æ˜¯äº‹æƒ…å¾€å¾€ä¸åƒè¡¨é¢ä¸Šé‚£ä¹ˆç®€å•")])]),t._v(" "),a("ol",[a("li",[t._v("ç›¸å¯¹äºæ¸¸æ ‡æŸ¥è¯¢ï¼Œ"),a("strong",[t._v("æµå¼å¯¹æ•°æ®åº“çš„å½±å“æ—¶é—´è¦æ›´é•¿ä¸€äº›")])]),t._v(" "),a("li",[t._v("å¦å¤–æµå¼æŸ¥è¯¢ä¾èµ–ç½‘ç»œï¼Œ"),a("strong",[t._v("å¯¼è‡´ç½‘ç»œæ‹¥å¡å¯èƒ½æ€§è¾ƒå¤§")])])]),t._v(" "),a("h2",{attrs:{id:"æµå¼æ¸¸æ ‡å†…å­˜åˆ†æ"}},[t._v("æµå¼æ¸¸æ ‡å†…å­˜åˆ†æ "),a("a",{staticClass:"header-anchor",attrs:{href:"#æµå¼æ¸¸æ ‡å†…å­˜åˆ†æ"}},[t._v("#")])]),t._v(" "),a("p",[t._v("è¡¨æ•°æ®é‡ï¼š500w")]),t._v(" "),a("p",[t._v("å†…å­˜æŸ¥çœ‹å·¥å…·ï¼šJDK è‡ªå¸¦ Jvisualvm")]),t._v(" "),a("p",[t._v("è®¾ç½® JVM å‚æ•°ï¼š -Xmx512m -Xms512m")]),t._v(" "),a("h3",{attrs:{id:"å•æ¬¡è°ƒç”¨å†…å­˜ä½¿ç”¨"}},[t._v("å•æ¬¡è°ƒç”¨å†…å­˜ä½¿ç”¨ "),a("a",{staticClass:"header-anchor",attrs:{href:"#å•æ¬¡è°ƒç”¨å†…å­˜ä½¿ç”¨"}},[t._v("#")])]),t._v(" "),a("p",[t._v("æµå¼æŸ¥è¯¢å†…å­˜æ€§èƒ½æŠ¥å‘Šå¦‚ä¸‹")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://images-machen.oss-cn-beijing.aliyuncs.com/image-20201230141437876.png",alt:"å›¾1 æ•°æ®ä»…ä¾›å‚è€ƒ"}})]),t._v(" "),a("p",[t._v("æ¸¸æ ‡æŸ¥è¯¢å†…å­˜æ€§èƒ½æŠ¥å‘Šå¦‚ä¸‹")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://images-machen.oss-cn-beijing.aliyuncs.com/image-20201230141536134.png",alt:"å›¾2 æ•°æ®ä»…ä¾›å‚è€ƒ"}})]),t._v(" "),a("p",[t._v("æ ¹æ®å†…å­˜å ç”¨æƒ…å†µæ¥çœ‹ï¼Œæ¸¸æ ‡æŸ¥è¯¢å’Œæµå¼æŸ¥è¯¢éƒ½ "),a("strong",[t._v("èƒ½å¤Ÿå¾ˆå¥½çš„é˜²æ­¢ OOM")])]),t._v(" "),a("h3",{attrs:{id:"å¹¶å‘è°ƒç”¨å†…å­˜ä½¿ç”¨"}},[t._v("å¹¶å‘è°ƒç”¨å†…å­˜ä½¿ç”¨ "),a("a",{staticClass:"header-anchor",attrs:{href:"#å¹¶å‘è°ƒç”¨å†…å­˜ä½¿ç”¨"}},[t._v("#")])]),t._v(" "),a("p",[t._v("å¹¶å‘è°ƒç”¨ï¼šJmete 1 ç§’ 10 ä¸ªçº¿ç¨‹å¹¶å‘è°ƒç”¨")]),t._v(" "),a("p",[t._v("æµå¼æŸ¥è¯¢å†…å­˜æ€§èƒ½æŠ¥å‘Šå¦‚ä¸‹")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://images-machen.oss-cn-beijing.aliyuncs.com/image-20201230140330532.png",alt:"å›¾3 æ•°æ®ä»…ä¾›å‚è€ƒ"}})]),t._v(" "),a("p",[t._v("å¹¶å‘è°ƒç”¨å¯¹äºå†…å­˜å ç”¨æƒ…å†µä¹Ÿå¾ˆ OKï¼Œ"),a("strong",[t._v("ä¸å­˜åœ¨å åŠ å¼å¢åŠ ")])]),t._v(" "),a("p",[t._v("æµå¼æŸ¥è¯¢å¹¶å‘è°ƒç”¨æ—¶é—´å¹³å‡æ¶ˆè€—ï¼š"),a("strong",[t._v("â‰ˆ 55s")])]),t._v(" "),a("p",[t._v("æ¸¸æ ‡æŸ¥è¯¢å†…å­˜æ€§èƒ½æŠ¥å‘Šå¦‚ä¸‹")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://images-machen.oss-cn-beijing.aliyuncs.com/image-20201230141036691.png",alt:"å›¾4 æ•°æ®ä»…ä¾›å‚è€ƒ"}})]),t._v(" "),a("p",[t._v("æ¸¸æ ‡æŸ¥è¯¢å¹¶å‘è°ƒç”¨æ—¶é—´å¹³å‡æ¶ˆè€—ï¼š"),a("strong",[t._v("â‰ˆ 83s")])]),t._v(" "),a("p",[t._v("å› ä¸ºè®¾å¤‡é™åˆ¶ï¼Œä»¥åŠéƒ¨åˆ†æƒ…å†µåªä¼šåœ¨æç«¯ä¸‹äº§ç”Ÿï¼Œæ‰€ä»¥æ²¡æœ‰è¿›è¡Œç”Ÿäº§ã€æµ‹è¯•å¤šç¯å¢ƒéªŒè¯ï¼Œå°ä¼™ä¼´æ„Ÿå…´è¶£å¯ä»¥è‡ªè¡Œæµ‹è¯•")]),t._v(" "),a("h2",{attrs:{id:"mybatis-å¦‚ä½•ä½¿ç”¨æµå¼æŸ¥è¯¢"}},[t._v("MyBatis å¦‚ä½•ä½¿ç”¨æµå¼æŸ¥è¯¢ "),a("a",{staticClass:"header-anchor",attrs:{href:"#mybatis-å¦‚ä½•ä½¿ç”¨æµå¼æŸ¥è¯¢"}},[t._v("#")])]),t._v(" "),a("p",[t._v("ä¸Šæ–‡éƒ½æ˜¯åœ¨æè¿°å¦‚ä½•ä½¿ç”¨ JDBC åŸç”Ÿ API è¿›è¡ŒæŸ¥è¯¢ï¼ŒORM æ¡†æ¶ Mybatis ä¹Ÿé’ˆå¯¹æµå¼æŸ¥è¯¢è¿›è¡Œäº†å°è£…")]),t._v(" "),a("p",[t._v("ResultHandler æ¥å£åªåŒ…å« handleResult æ–¹æ³•ï¼Œå¯ä»¥è·å–åˆ°å·²è½¬æ¢åçš„ Java å®ä½“ç±»")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Slf4j")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Service")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MyBatisStreamService")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Resource")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MyBatisStreamMapper")]),t._v(" myBatisStreamMapper"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("mybatisStreamQuery")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("long")]),t._v(" start "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("currentTimeMillis")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        myBatisStreamMapper"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("mybatisStreamQuery")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ResultHandler")]),a("span",{pre:!0,attrs:{class:"token generics"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("YOU_TABLE_DO"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Override")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("handleResult")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ResultContext")]),a("span",{pre:!0,attrs:{class:"token generics"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("extends")]),t._v(" YOU_TABLE_DO"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" resultContext"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        log"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("info")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"  ğŸš€ğŸš€ğŸš€ MyBatisæŸ¥è¯¢è€—æ—¶ :: {} "')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("currentTimeMillis")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" start"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("é™¤äº†ä¸‹è¿°æ³¨è§£å¼çš„åº”ç”¨æ–¹å¼ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ .xml æ–‡ä»¶çš„å½¢å¼")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Mapper")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("interface")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MyBatisStreamMapper")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Options")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("resultSetType "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ResultSetType")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("FORWARD_ONLY"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" fetchSize "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Integer")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("MIN_VALUE"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@ResultType")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("YOU_TABLE_DO"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Select")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"SELECT COLUMN_A, COLUMN_B, COLUMN_C FROM YOU_TABLE"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("mybatisStreamQuery")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ResultHandler")]),a("span",{pre:!0,attrs:{class:"token generics"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("YOU_TABLE_DO"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" handler"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("Mybatis æµå¼æŸ¥è¯¢è°ƒç”¨æ—¶é—´æ¶ˆè€—ï¼š"),a("strong",[t._v("â‰ˆ 18s")])]),t._v(" "),a("p",[t._v("JDBC æµå¼ä¸ MyBatis å°è£…çš„æµå¼è¯»å–å¯¹æ¯”")]),t._v(" "),a("ol",[a("li",[t._v("MyBatis ç›¸å¯¹äºåŸç”Ÿçš„æµå¼è¿˜æ˜¯æ…¢ä¸Šäº†ä¸å°‘ï¼Œä½†æ˜¯è€ƒè™‘åˆ°åº•å±‚çš„å°è£…çš„ç‰¹æ€§ï¼Œè¿™ç‚¹æ€§èƒ½è¿˜æ˜¯å¯ä»¥æ¥å—çš„")]),t._v(" "),a("li",[t._v("ä»å†…å­˜å æ¯”è€Œè¨€ï¼Œä¸¤è€…æ³¢åŠ¨ç›¸å·®æ— å‡ ")]),t._v(" "),a("li",[t._v("MyBatis ç›¸å¯¹äºåŸç”Ÿ JDBC æ›´ä¸ºçš„æ–¹ä¾¿ï¼Œå› ä¸ºå°è£…äº†å›è°ƒå‡½æ•°ä»¥åŠåºåˆ—åŒ–å¯¹è±¡ç­‰ç‰¹æ€§")])]),t._v(" "),a("p",[t._v("ä¸¤è€…å…·ä½“çš„ä½¿ç”¨ï¼Œå¯ä»¥é’ˆå¯¹é¡¹ç›®å®é™…æƒ…å†µè€Œå®šï¼Œ"),a("strong",[t._v("æ²¡æœ‰æœ€å¥½çš„ï¼Œåªæœ‰æœ€é€‚åˆçš„")])]),t._v(" "),a("h2",{attrs:{id:"ç»“è¨€"}},[t._v("ç»“è¨€ "),a("a",{staticClass:"header-anchor",attrs:{href:"#ç»“è¨€"}},[t._v("#")])]),t._v(" "),a("p",[t._v("æµå¼æŸ¥è¯¢ã€æ¸¸æ ‡æŸ¥è¯¢å¯ä»¥é¿å… OOMï¼Œ"),a("strong",[t._v("æ•°æ®é‡å¤§å¯ä»¥è€ƒè™‘æ­¤æ–¹æ¡ˆ")]),t._v("ã€‚ä½†æ˜¯è¿™ä¸¤ç§æ–¹å¼ä¼šå ç”¨æ•°æ®åº“è¿æ¥ï¼Œä½¿ç”¨ä¸­ä¸ä¼šé‡Šæ”¾ï¼Œæ‰€ä»¥çº¿ä¸Šé’ˆå¯¹å¤§æ•°æ®é‡ä¸šåŠ¡ç”¨åˆ°æ¸¸æ ‡å’Œæµå¼æ“ä½œï¼Œ"),a("strong",[t._v("ä¸€å®šè¦è¿›è¡Œå¹¶å‘æ§åˆ¶")])]),t._v(" "),a("p",[t._v("å¦å¤–é’ˆå¯¹ JDBC åŸç”Ÿæµå¼æŸ¥è¯¢ï¼ŒMybatis ä¸­ä¹Ÿè¿›è¡Œäº†å°è£…ï¼Œè™½ç„¶ä¼šæ…¢ä¸€äº›ï¼Œä½†æ˜¯ "),a("strong",[t._v("åŠŸèƒ½ä»¥åŠä»£ç çš„æ•´æ´ç¨‹åº¦ä¼šå¥½ä¸Šä¸å°‘")])]),t._v(" "),a("p",[a("strong",[t._v("å‚è€ƒæ–‡ç« ï¼š")])]),t._v(" "),a("ol",[a("li",[t._v("https://blog.csdn.net/xieyuooo/article/details/83109971")])])])}),[],!1,null,null,null);s.default=e.exports}}]);