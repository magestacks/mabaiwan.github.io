(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{796:function(s,t,a){"use strict";a.r(t);var n=a(118),e=Object(n.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"å¿ƒæ€å´©äº†å‘€-mybatis-åŠ¨æ€ä»£ç†è¿™ä¹ˆç©"}},[s._v("å¿ƒæ€å´©äº†å‘€ï¼Mybatis åŠ¨æ€ä»£ç†è¿™ä¹ˆç©ï¼Ÿï¼ "),a("a",{staticClass:"header-anchor",attrs:{href:"#å¿ƒæ€å´©äº†å‘€-mybatis-åŠ¨æ€ä»£ç†è¿™ä¹ˆç©"}},[s._v("#")])]),s._v(" "),a("p",[s._v("å‡å¦‚æœ‰äººé—®ä½ è¿™ä¹ˆå‡ ä¸ªé—®é¢˜ï¼Œçœ‹èƒ½ä¸èƒ½ç­”ä¸Šæ¥")]),s._v(" "),a("ol",[a("li",[s._v("Mybatis Mapper æ¥å£æ²¡æœ‰å®ç°ç±»ï¼Œæ€ä¹ˆå®ç°çš„ SQL æŸ¥è¯¢")]),s._v(" "),a("li",[s._v("JDK åŠ¨æ€ä»£ç†ä¸ºä»€ä¹ˆä¸èƒ½å¯¹ç±»è¿›è¡Œä»£ç†ï¼ˆå……è¯è´¹é€çš„é—®é¢˜ï¼‰")]),s._v(" "),a("li",[s._v("æŠ½è±¡ç±»å¯ä¸å¯ä»¥è¿›è¡Œ JDK åŠ¨æ€ä»£ç†ï¼ˆé™„åŠ é—®é¢˜ï¼‰")])]),s._v(" "),a("p",[a("img",{attrs:{src:"https://images-machen.oss-cn-beijing.aliyuncs.com/%E4%BD%A0%E8%AF%B4%E5%95%A5%E5%91%A2-%E8%A1%A8%E6%83%85%E5%8C%85.jpeg?x-oss-process=image/resize,h_200,w_200",alt:""}})]),s._v(" "),a("p",[s._v("ç­”ä¸ä¸Šæ¥çš„é“æ±ï¼Œè¯æ˜ Proxyã€Mybatis æºç è¿˜æ²¡çœ‹åˆ°ä½ã€‚ä¸è¿‡æ²¡æœ‰å…³ç³»ï¼Œç»§ç»­å¾€ä¸‹çœ‹å°±æ˜ç™½äº†")]),s._v(" "),a("h2",{attrs:{id:"åŠ¨æ€ä»£ç†å®æˆ˜"}},[s._v("åŠ¨æ€ä»£ç†å®æˆ˜ "),a("a",{staticClass:"header-anchor",attrs:{href:"#åŠ¨æ€ä»£ç†å®æˆ˜"}},[s._v("#")])]),s._v(" "),a("p",[s._v("ä¼—æ‰€å‘¨çŸ¥å“ˆï¼ŒMybatis åº•å±‚å°è£…ä½¿ç”¨çš„ JDK åŠ¨æ€ä»£ç†ã€‚è¯´ Mybatis åŠ¨æ€ä»£ç†ä¹‹å‰ï¼Œå…ˆæ¥çœ‹ä¸€ä¸‹å¹³å¸¸æˆ‘ä»¬å†™çš„åŠ¨æ€ä»£ç† Demoï¼ŒæŠ›ç –å¼•ç‰")]),s._v(" "),a("p",[s._v("ä¸€èˆ¬æ¥è¯´å®šä¹‰ JDK åŠ¨æ€ä»£ç†åˆ†ä¸ºä¸‰ä¸ªæ­¥éª¤ï¼Œå¦‚ä¸‹æ‰€ç¤º")]),s._v(" "),a("ol",[a("li",[s._v("å®šä¹‰ä»£ç†æ¥å£")]),s._v(" "),a("li",[s._v("å®šä¹‰ä»£ç†æ¥å£å®ç°ç±»")]),s._v(" "),a("li",[s._v("å®šä¹‰åŠ¨æ€ä»£ç†è°ƒç”¨å¤„ç†å™¨")])]),s._v(" "),a("p",[s._v("ä¸‰æ­¥ä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼Œç©è¿‡åŠ¨æ€ä»£ç†çš„å°ä¼™ä¼´çœ‹è¿‡å°±èƒ½æ˜ç™½")]),s._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("interface")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Subject")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// å®šä¹‰ä»£ç†æ¥å£")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sayHello")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SubjectImpl")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("implements")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Subject")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// å®šä¹‰ä»£ç†æ¥å£å®ç°ç±»")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Override")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sayHello")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("System")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("out"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("println")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('" Hello World"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"success"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ProxyInvocationHandler")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("implements")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("InvocationHandler")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// å®šä¹‰åŠ¨æ€ä»£ç†è°ƒç”¨å¤„ç†å™¨")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Object")]),s._v(" target"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ProxyInvocationHandler")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Object")]),s._v(" target"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("target "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" target"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Override")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Object")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("invoke")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Object")]),s._v(" proxy"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Method")]),s._v(" method"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Object")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" args"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("throws")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Throwable")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("System")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("out"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("println")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('" ğŸ§± ğŸ§± ğŸ§± è¿›å…¥ä»£ç†è°ƒç”¨å¤„ç†å™¨ "')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" method"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("invoke")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("target"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" args"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),a("p",[s._v("å†™ä¸ªæµ‹è¯•ç¨‹åºï¼Œè¿è¡Œä¸€ä¸‹çœ‹çœ‹æ•ˆæœï¼ŒåŒæ ·æ˜¯åˆ†ä¸‰æ­¥")]),s._v(" "),a("ol",[a("li",[s._v("åˆ›å»ºè¢«ä»£ç†æ¥å£çš„å®ç°ç±»")]),s._v(" "),a("li",[s._v("åˆ›å»ºåŠ¨æ€ä»£ç†ç±»ï¼Œè¯´ä¸€ä¸‹ä¸‰ä¸ªå‚æ•°\n"),a("ul",[a("li",[s._v("ç±»åŠ è½½å™¨")]),s._v(" "),a("li",[s._v("è¢«ä»£ç†ç±»æ‰€å®ç°çš„æ¥å£æ•°ç»„")]),s._v(" "),a("li",[s._v("è°ƒç”¨å¤„ç†å™¨ï¼ˆè°ƒç”¨è¢«ä»£ç†ç±»æ–¹æ³•ï¼Œæ¯æ¬¡éƒ½ç»è¿‡å®ƒï¼‰")])])]),s._v(" "),a("li",[s._v("è¢«ä»£ç†å®ç°ç±»è°ƒç”¨æ–¹æ³•")])]),s._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ProxyTest")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("static")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("main")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" args"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Subject")]),s._v(" subject "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SubjectImpl")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Subject")]),s._v(" proxy "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Subject")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Proxy")]),s._v("\n                "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("newProxyInstance")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n                        subject"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("getClass")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("getClassLoader")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n                        subject"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("getClass")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("getInterfaces")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n                        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ProxyInvocationHandler")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("subject"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n        proxy"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sayHello")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/**\n         * æ‰“å°è¾“å‡ºå¦‚ä¸‹\n         * è°ƒç”¨å¤„ç†å™¨ï¼šğŸ§± ğŸ§± ğŸ§± è¿›å…¥ä»£ç†è°ƒç”¨å¤„ç†å™¨\n         * è¢«ä»£ç†å®ç°ç±»ï¼šHello World\n         */")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),a("p",[s._v("Demo åŠŸèƒ½å®ç°äº†ï¼Œå¤§è‡´è¿è¡Œæµç¨‹ä¹Ÿæ¸…æ¥šäº†ï¼Œä¸‹é¢è¦é’ˆå¯¹åŸç†å®ç°å±•å¼€åˆ†æ")]),s._v(" "),a("h2",{attrs:{id:"åŠ¨æ€ä»£ç†åŸç†åˆ†æ"}},[s._v("åŠ¨æ€ä»£ç†åŸç†åˆ†æ "),a("a",{staticClass:"header-anchor",attrs:{href:"#åŠ¨æ€ä»£ç†åŸç†åˆ†æ"}},[s._v("#")])]),s._v(" "),a("p",[s._v("ä»åŸç†çš„è§’åº¦ä¸Šè§£æä¸€ä¸‹ï¼Œä¸Šé¢åŠ¨æ€ä»£ç†æµ‹è¯•ç¨‹åºæ˜¯å¦‚ä½•æ‰§è¡Œçš„")]),s._v(" "),a("p",[s._v("ç¬¬ä¸€æ­¥ç®€å•æ˜äº†ï¼Œ"),a("strong",[s._v("åˆ›å»ºäº† Subject æ¥å£çš„å®ç°ç±»")]),s._v("ï¼Œä¹Ÿæ˜¯æˆ‘ä»¬å¸¸è§„çš„å®ç°")]),s._v(" "),a("p",[s._v("ç¬¬äºŒæ­¥æ˜¯åˆ›å»ºè¢«ä»£ç†å¯¹è±¡çš„åŠ¨æ€ä»£ç†å¯¹è±¡ã€‚è¿™é‡Œæœ‰æœ‹å‹å°±é—®äº†ï¼Œæ€ä¹ˆè¯æ˜è¿™æ˜¯ä¸ªåŠ¨æ€ä»£ç†å¯¹è±¡ï¼Ÿå¦‚å›¾æ‰€ç¤º")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://images-machen.oss-cn-beijing.aliyuncs.com/image-20210111133425968.png",alt:""}})]),s._v(" "),a("p",[s._v("JDK åŠ¨æ€ä»£ç†å¯¹è±¡åç§°æ˜¯æœ‰è§„åˆ™çš„ï¼Œå‡¡æ˜¯ç»è¿‡ Proxy ç±»ç”Ÿæˆçš„åŠ¨æ€ä»£ç†å¯¹è±¡ï¼Œå‰ç¼€å¿…ç„¶æ˜¯ "),a("strong",[s._v("$Proxy")]),s._v("ï¼Œåé¢çš„æ•°å­—ä¹Ÿæ˜¯åç§°ç»„æˆéƒ¨åˆ†")]),s._v(" "),a("p",[s._v("å¦‚æœæœ‰å°ä¼™ä¼´æƒ³è¦ä¸€æ¢ç©¶ç«Ÿï¼Œ"),a("strong",[s._v("å…³æ³¨ Proxy å†…éƒ¨ç±» ProxyClassFactory")]),s._v("ï¼Œè¿™é‡Œä¼šæœ‰æƒ³è¦çš„ç­”æ¡ˆ")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://images-machen.oss-cn-beijing.aliyuncs.com/image-20210111134232414.png",alt:""}})]),s._v(" "),a("p",[s._v("å›å½’æ­£é¢˜ï¼Œç»§ç»­çœ‹ä¸€ä¸‹ ProxyInvocationHandlerï¼Œ"),a("strong",[s._v("å†…éƒ¨ä¿æŒäº†è¢«ä»£ç†æ¥å£å®ç°ç±»çš„å¼•ç”¨")]),s._v("ï¼Œinvoke æ–¹æ³•å†…éƒ¨ä½¿ç”¨åå°„è°ƒç”¨è¢«ä»£ç†æ¥å£å®ç°ç±»æ–¹æ³•")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://images-machen.oss-cn-beijing.aliyuncs.com/image-20210112101502099.png",alt:""}})]),s._v(" "),a("p",[s._v("å¯ä»¥çœ‹å‡ºç”Ÿæˆçš„åŠ¨æ€ä»£ç†ç±»ï¼Œç»§æ‰¿äº† Proxy ç±»ï¼Œç„¶åå¯¹ Subject æ¥å£è¿›è¡Œäº†å®ç°ï¼Œè€Œå®ç°æ–¹æ³• sayHello ä¸­å®é™…è°ƒç”¨çš„æ˜¯ ProxyInvocationHandler çš„ invoke æ–¹æ³•")]),s._v(" "),a("blockquote",[a("p",[s._v("ä¸€ä¸å°å¿ƒå‘ç°äº† JDK åŠ¨æ€ä»£ç†ä¸èƒ½å¯¹ç±»è¿›è¡Œä»£ç†çš„åŸå›  ^ ^")])]),s._v(" "),a("p",[s._v("ä¹Ÿå°±æ˜¯è¯´ï¼Œå½“æˆ‘ä»¬è°ƒç”¨ "),a("code",[s._v("Subject#sayHello")]),s._v(" æ—¶ï¼Œæ–¹æ³•è°ƒç”¨é“¾æ˜¯è¿™æ ·çš„")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://images-machen.oss-cn-beijing.aliyuncs.com/image-20210111140427269.png",alt:""}})]),s._v(" "),a("p",[s._v("ä½†æ˜¯ï¼ŒDemo é‡Œæœ‰è¢«ä»£ç†æ¥å£çš„å®ç°ç±»ï¼ŒMybatis Mapper æ²¡æœ‰ï¼Œè¿™è¦æ€ä¹ˆç©")]),s._v(" "),a("p",[s._v("ä¸çŸ¥é“ä¸è¦ç´§ï¼ŒçŸ¥é“äº†ä¼°è®¡ä¹Ÿçœ‹ä¸åˆ°è¿™äº†ï¼Œä¸€èµ·çœ‹ä¸‹ mybatis æºç æ˜¯æ€ä¹ˆç©çš„")]),s._v(" "),a("blockquote",[a("p",[s._v("mybatis versionï¼š3.4.x")])]),s._v(" "),a("h2",{attrs:{id:"mybatis-æºç å®ç°"}},[s._v("Mybatis æºç å®ç° "),a("a",{staticClass:"header-anchor",attrs:{href:"#mybatis-æºç å®ç°"}},[s._v("#")])]),s._v(" "),a("p",[s._v("ä¸çŸ¥é“å¤§å®¶è€ƒæ²¡è€ƒè™‘è¿‡è¿™ä¹ˆä¸€ä¸ªé—®é¢˜ï¼Œ"),a("strong",[s._v("Mapper Mapper ä¸ºä»€ä¹ˆä¸éœ€è¦å®ç°ç±»ï¼Ÿ")])]),s._v(" "),a("p",[s._v("å‡å¦‚è¯´ï¼Œæˆ‘ä»¬é¡¹ç›®ä½¿ç”¨çš„ä¸‰å±‚è®¾è®¡ï¼ŒController æ§åˆ¶è¯·æ±‚æ¥æ”¶ï¼ŒService è´Ÿè´£ä¸šåŠ¡å¤„ç†ï¼ŒMapper è´Ÿè´£æ•°æ®åº“äº¤äº’")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://images-machen.oss-cn-beijing.aliyuncs.com/image-20210111153124692.png",alt:""}})]),s._v(" "),a("p",[s._v("Mapper å±‚ä¹Ÿå°±æ˜¯æˆ‘ä»¬å¸¸è¯´çš„æ•°æ®åº“æ˜ å°„å±‚ï¼Œè´Ÿè´£å¯¹æ•°æ®åº“çš„æ“ä½œï¼Œæ¯”å¦‚å¯¹æ•°æ®çš„æŸ¥è¯¢æˆ–è€…æ–°å¢ã€åˆ é™¤ç­‰")]),s._v(" "),a("p",[s._v("å¤§èƒ†è®¾æƒ³ä¸‹ï¼Œé¡¹ç›®æ²¡æœ‰ä½¿ç”¨ Mybatisï¼Œéœ€è¦åœ¨ Mapper å®ç°å±‚å†™æ•°æ®åº“äº¤äº’ï¼Œä¼šå†™ä¸€äº›ä»€ä¹ˆå†…å®¹ï¼Ÿ")]),s._v(" "),a("p",[s._v("ä¼šå†™ä¸€äº›å¸¸è§„çš„ JDBC æ“ä½œï¼Œæ¯”å¦‚ï¼š")]),s._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// è£…è½½Mysqlé©±åŠ¨")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Class")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("forName")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("driveName"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// è·å–è¿æ¥")]),s._v("\ncon "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("DriverManager")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("getConnection")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("url"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" user"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" pass"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// åˆ›å»ºStatement")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Statement")]),s._v(" state "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" con"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("createStatement")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// æ„å»ºSQLè¯­å¥")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" stuQuerySqlStr "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"SELECT * FROM student"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// æ‰§è¡ŒSQLè¿”å›ç»“æœ")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ResultSet")]),s._v(" result "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" state"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("executeQuery")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("stuQuerySqlStr"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("\n")])])]),a("p",[s._v("å¦‚æœé¡¹ç›®ä¸­æ‰€æœ‰ Mapper å®ç°å±‚éƒ½è¦è¿™ä¹ˆç©ï¼Œé‚£å²‚ä¸æ˜¯å¾ˆæƒ³æ‰“äºº...")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://images-machen.oss-cn-beijing.aliyuncs.com/%E6%B2%A1%E6%84%8F%E6%80%9D.png?x-oss-process=image/resize,h_200,w_200",alt:""}})]),s._v(" "),a("p",[s._v("æ‰€ä»¥ Mybatis ç»“åˆé¡¹ç›®ç—›ç‚¹ï¼Œåº”è¿è€Œç”Ÿï¼Œæ€ä¹ˆåšçš„å‘¢")]),s._v(" "),a("ol",[a("li",[s._v("å°†æ‰€æœ‰å’Œ JDBC äº¤äº’çš„æ“ä½œï¼Œåº•å±‚é‡‡ç”¨ JDK åŠ¨æ€ä»£ç†å°è£…ï¼Œä½¿ç”¨è€…åªéœ€è¦è‡ªå®šä¹‰ Mapper å’Œ .xml æ–‡ä»¶")]),s._v(" "),a("li",[s._v("SQL è¯­å¥å®šä¹‰åœ¨ .xml æ–‡ä»¶æˆ–è€… Mapper ä¸­ï¼Œé¡¹ç›®å¯åŠ¨æ—¶é€šè¿‡è§£æå™¨è§£æ SQL è¯­å¥ç»„è£…ä¸º Java ä¸­çš„å¯¹è±¡")])]),s._v(" "),a("blockquote",[a("p",[s._v("è§£æå™¨åˆ†ä¸ºå¤šç§ï¼Œå› ä¸º Mybatis ä¸­ä¸ä»…æœ‰é™æ€è¯­å¥ï¼ŒåŒæ—¶ä¹ŸåŒ…å«åŠ¨æ€ SQL è¯­å¥")])]),s._v(" "),a("p",[s._v("è¿™ä¹Ÿå°±æ˜¯ä¸ºä»€ä¹ˆ Mapper æ¥å£ä¸éœ€è¦å®ç°ç±»ï¼Œ"),a("strong",[s._v("å› ä¸ºéƒ½å·²ç»è¢« Mybatis é€šè¿‡åŠ¨æ€ä»£ç†å°è£…äº†ï¼Œå¦‚æœæ¯ä¸ª Mapper éƒ½æ¥ä¸€ä¸ªå®ç°ç±»ï¼Œè‡ƒè‚¿ä¸”æ— ç”¨")]),s._v("ã€‚ç»è¿‡è¿™ä¸€é¡¿æ“ä½œï¼Œå±•ç¤ºç»™æˆ‘ä»¬çš„å°±æ˜¯é¡¹ç›®é‡Œç”¨åˆ°çš„ Mybatis æ¡†æ¶")]),s._v(" "),a("p",[s._v("ä¸Šé¢é“ºå«è¿™ä¹ˆä¹…ï¼Œç»ˆäºè¦åˆ°ä¸»è§’äº†ï¼Œ"),a("strong",[s._v("ä¸ºä»€ä¹ˆ Mybatis Mapper æ¥å£æ²¡æœ‰å®ç°ç±»ä¹Ÿå¯ä»¥å®ç°åŠ¨æ€ä»£ç†")])]),s._v(" "),a("blockquote",[a("p",[s._v("æƒ³è¦ä¸¥æ ¼æŒ‰ç…§å…ˆåé¡ºåºä»‹ç» Mybatis åŠ¨æ€ä»£ç†æµç¨‹ï¼Œè€Œä¸è¶…å‰å¼•ç”¨æœªä»‹ç»è¿‡çš„æœ¯è¯­ï¼Œè¿™å‡ ä¹æ˜¯ä¸å¯èƒ½çš„ï¼Œç¬”è€…å°½é‡è¯´çš„é€šä¿—æ˜“æ‡‚")])]),s._v(" "),a("h2",{attrs:{id:"æ— å®ç°ç±»å®ŒæˆåŠ¨æ€ä»£ç†"}},[s._v("æ— å®ç°ç±»å®ŒæˆåŠ¨æ€ä»£ç† "),a("a",{staticClass:"header-anchor",attrs:{href:"#æ— å®ç°ç±»å®ŒæˆåŠ¨æ€ä»£ç†"}},[s._v("#")])]),s._v(" "),a("p",[s._v("æ ¸å¿ƒç‚¹æ¥äº†ï¼Œæ‹¿èµ·å°æœ¬æœ¬åæ¿æ­£äº†")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://images-machen.oss-cn-beijing.aliyuncs.com/%E5%BF%AB%E9%97%AA%E5%BC%80%EF%BC%8C%E4%BB%96%E8%A6%81%E5%BC%80%E5%A7%8B%E8%A3%85%E9%80%BC%E4%BA%86.jpg?x-oss-process=image/resize,h_300,w_300",alt:""}})]),s._v(" "),a("p",[s._v("æˆ‘ä»¬å…ˆæ¥çœ‹ä¸‹æ™®é€šåŠ¨æ€ä»£ç†æœ‰æ²¡æœ‰å¯èƒ½ä¸ç”¨å®ç°ç±»ï¼Œä»…é æ¥å£å®Œæˆ")]),s._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("interface")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Subject")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sayHello")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ProxyInvocationHandler")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("implements")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("InvocationHandler")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Override")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Object")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("invoke")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Object")]),s._v(" proxy"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Method")]),s._v(" method"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Object")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" args"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("throws")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Throwable")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("System")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("out"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("println")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('" ğŸ§± ğŸ§± ğŸ§± è¿›å…¥ä»£ç†è°ƒç”¨å¤„ç†å™¨ "')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"success"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),a("p",[s._v("æ ¹æ®ä»£ç å¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬å¹¶æ²¡æœ‰å®ç°æ¥å£ Subjectï¼Œç»§ç»­çœ‹ä¸€ä¸‹æ€ä¹ˆå®ç°åŠ¨æ€ä»£ç†")]),s._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ProxyTest")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("static")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("main")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" args"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Subject")]),s._v(" proxy "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Subject")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Proxy")]),s._v("\n                "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("newProxyInstance")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n                        subject"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("getClass")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("getClassLoader")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n                        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Class")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Subject")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n                        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ProxyInvocationHandler")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n        proxy"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sayHello")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/**\n         * æ‰“å°è¾“å‡ºå¦‚ä¸‹\n         * è°ƒç”¨å¤„ç†å™¨ï¼šğŸ§± ğŸ§± ğŸ§± è¿›å…¥ä»£ç†è°ƒç”¨å¤„ç†å™¨\n         */")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),a("p",[s._v("å¯ä»¥çœ‹åˆ°ï¼Œå¯¹æ¯”æ–‡åˆçš„ Demoï¼Œè¿™é‡Œå¯¹ "),a("code",[s._v("Proxy.newProxyInstance")]),s._v(" æ–¹æ³•çš„å‚æ•°ä½œå‡ºäº†å˜åŒ–")]),s._v(" "),a("p",[s._v("ä¹‹å‰æ˜¯é€šè¿‡å®ç°ç±»è·å–æ‰€å®ç°æ¥å£çš„ Class æ•°ç»„ï¼Œè€Œè¿™é‡Œæ˜¯æŠŠæ¥å£æœ¬èº«æ”¾åˆ° Class æ•°ç»„ä¸­ï¼Œæ®Šå½’åŒé€”")]),s._v(" "),a("p",[s._v("æœ‰å®ç°æ¥å£å’Œæ— å®ç°æ¥å£äº§ç”Ÿçš„åŠ¨æ€ä»£ç†ç±»æœ‰ä»€ä¹ˆåŒºåˆ«")]),s._v(" "),a("ol",[a("li",[s._v("æœ‰å®ç°æ¥å£æ˜¯å¯¹ "),a("code",[s._v("InvocationHandler#invoke")]),s._v(" æ–¹æ³•è°ƒç”¨ï¼Œinvoke æ–¹æ³•é€šè¿‡åå°„è°ƒç”¨è¢«ä»£ç†å¯¹è±¡ï¼ˆSubjectImplï¼‰æ–¹æ³•ï¼ˆsayHelloï¼‰")]),s._v(" "),a("li",[s._v("æ— å®ç°æ¥å£åˆ™æ˜¯ä»…å¯¹ "),a("code",[s._v("InvocationHandler#invoke")]),s._v(" äº§ç”Ÿè°ƒç”¨ã€‚"),a("strong",[s._v("æ‰€ä»¥æœ‰æ¥å£å®ç°è¿”å›çš„æ˜¯è¢«ä»£ç†å¯¹è±¡æ¥å£è¿”å›å€¼ï¼Œè€Œæ— å®ç°æ¥å£è¿”å›çš„ä»…æ˜¯ invoke æ–¹æ³•è¿”å›å€¼")])])]),s._v(" "),a("p",[a("code",[s._v("InvocationHandler#invoke")]),s._v(" æ–¹æ³•è¿”å›å€¼æ˜¯ success å­—ç¬¦ä¸²ï¼Œå®šä¹‰ä¸ªå­—ç¬¦ä¸²å˜é‡ï¼Œæ˜¯å¦èƒ½æˆåŠŸè¿”å›")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://images-machen.oss-cn-beijing.aliyuncs.com/image-20210112222532385.png",alt:""}})]),s._v(" "),a("p",[s._v("ç°åœ¨ç¬¬ä¸€ä¸ªé—®é¢˜ç­”æ¡ˆå·²ç»æµ®ç°ï¼Œ"),a("strong",[s._v("Mapper æ²¡æœ‰å®ç°ç±»ï¼Œæ‰€æœ‰è°ƒç”¨ JDBC ç­‰æ“ä½œéƒ½æ˜¯åœ¨ Mybatis InvocationHandler å®ç°çš„")])]),s._v(" "),a("p",[s._v("é—®é¢˜æ—¢ç„¶å·²ç»å¾—åˆ°äº†è§£å†³ï¼Œç»™äººä¸€ç§æ„Ÿè§‰ï¼Œå¥½åƒæ²¡é‚£ä¹ˆéš¾ï¼Œä½†æ˜¯ä½ ä¸å¥½å¥‡ï¼ŒMybatis åº•å±‚æ€ä¹ˆåšçš„ä¹ˆï¼Ÿ")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://images-machen.oss-cn-beijing.aliyuncs.com/%E9%9A%BE%E6%90%9E%E5%95%8A.jpg",alt:""}})]),s._v(" "),a("p",[s._v("å…ˆæŠ›å‡ºä¸€ä¸ªé—®é¢˜ï¼Œç„¶åå¸¦ç€é—®é¢˜å»çœ‹æºç ï¼Œå¯èƒ½è®©ä½ è®°å¿† Double å€æ·±åˆ»")]),s._v(" "),a("p",[s._v("å’±ä»¬ Demo é‡Œçš„æ¥å£æ˜¯å›ºå®šçš„ï¼ŒMybatis Mapper å¯æ˜¯ä¸å›ºå®šçš„ï¼Œæ€ä¹ˆæï¼Ÿ")]),s._v(" "),a("p",[a("strong",[s._v("Mybatis æ˜¯è¿™ä¹ˆè¯´çš„")])]),s._v(" "),a("p",[a("img",{attrs:{src:"https://images-machen.oss-cn-beijing.aliyuncs.com/%E6%88%91%E4%B8%8D%E8%A7%89%E5%BE%97%E8%BF%99%E6%98%AF%E4%B8%AA%E9%97%AE%E9%A2%98.jpeg?x-oss-process=image/resize,h_300,w_300",alt:""}})]),s._v(" "),a("p",[s._v("çœ‹çœ‹ Mybatis åº•å±‚å®ƒæ€ä¹ˆå®ç°çš„åŠ¨æ€æ¥å£ä»£ç†ï¼Œå°ä¼™ä¼´åªéœ€è¦å…³æ³¨æ ‡è®°å¤„çš„ä»£ç å³å¯")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://images-machen.oss-cn-beijing.aliyuncs.com/image-20210112130314572.png",alt:""}})]),s._v(" "),a("p",[s._v("å’Œæˆ‘ä»¬çš„ Demo ä»£ç å¾ˆåƒï¼Œæ ¸å¿ƒç‚¹åœ¨äº "),a("strong",[s._v("mapperInterface")]),s._v(" å®ƒæ˜¯æ€ä¹ˆèµ‹å€¼çš„")]),s._v(" "),a("p",[s._v("å…ˆæ¥è¯´ä¸€ä¸‹ Mybatis ä»£ç†å·¥å‚ä¸­å…·ä½“ç”ŸæˆåŠ¨æ€ä»£ç†ç±»å…·ä½“é€»è¾‘")]),s._v(" "),a("ol",[a("li",[s._v("æ ¹æ® .xml ä¸Šå…³è”çš„ namespace, é€šè¿‡ "),a("code",[s._v("Class#forName")]),s._v(" åå°„çš„æ–¹å¼è¿”å› Class å¯¹è±¡ï¼ˆä¸æ­¢ .xml namespace ä¸€ç§æ–¹å¼ï¼‰")]),s._v(" "),a("li",[s._v("å°†å¾—åˆ°çš„ Class å¯¹è±¡ï¼ˆå®é™…å°±æ˜¯æ¥å£å¯¹è±¡ï¼‰ä¼ é€’ç»™ Mybatis ä»£ç†å·¥å‚ç”Ÿæˆä»£ç†å¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯åˆšæ‰ mapperInterface å±æ€§")])]),s._v(" "),a("p",[s._v("è°œåº•æ­æ™“ï¼ŒMybatis ä½¿ç”¨æ¥å£å…¨é™å®šåé€šè¿‡ "),a("code",[s._v("Class#forName")]),s._v(" ç”Ÿæˆ Class å¯¹è±¡ï¼Œè¿™ä¸ª Class å¯¹è±¡ç±»å‹å°±æ˜¯æ¥å£")]),s._v(" "),a("p",[s._v("ä¸ºäº†æ–¹ä¾¿å¤§å®¶ç†è§£ï¼Œé€šè¿‡ Mybatis æºç æä¾›çš„æµ‹è¯•ç±»ä¸¾ä¾‹ã€‚å‡è®¾å·²æœ‰æ¥å£ AutoConstructorMapper ä»¥åŠå¯¹åº”çš„ .xml å¦‚ä¸‹")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://images-machen.oss-cn-beijing.aliyuncs.com/image-20210112132212106.png",alt:""}})]),s._v(" "),a("p",[a("img",{attrs:{src:"https://images-machen.oss-cn-beijing.aliyuncs.com/image-20210112132257008.png",alt:""}})]),s._v(" "),a("p",[s._v("æ‰§è¡Œç¬¬ä¸€æ­¥ï¼Œæ ¹æ® .xml namespace å¾—åˆ° Class å¯¹è±¡")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://images-machen.oss-cn-beijing.aliyuncs.com/image-20210112132433980.png",alt:""}})]),s._v(" "),a("ol",[a("li",[s._v("é¦–å…ˆç¬¬ä¸€æ­¥è·å– .xml ä¸Š mapper æ ‡ç­¾ namespace å±æ€§ï¼Œå¾—åˆ° mapper æ¥å£å…¨é™å®šä¿¡æ¯")]),s._v(" "),a("li",[s._v("æ ¹æ® mapper å…¨é™å®šä¿¡æ¯è·å– Class å¯¹è±¡")]),s._v(" "),a("li",[s._v("æ·»åŠ åˆ°å¯¹åº”çš„æ˜ å°„å™¨å®¹å™¨ä¸­ï¼Œç­‰å¾…ç”ŸæˆåŠ¨æ€ä»£ç†å¯¹è±¡")])]),s._v(" "),a("p",[s._v("å¦‚æœæ­¤æ—¶è°ƒç”¨ç”ŸæˆåŠ¨æ€ä»£ç†å¯¹è±¡ï¼Œä»£ç†å·¥å‚ newInstance æ–¹æ³•å¦‚ä¸‹ï¼š")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://images-machen.oss-cn-beijing.aliyuncs.com/image-20210112131357019.png",alt:""}})]),s._v(" "),a("p",[s._v("è‡³æ­¤ï¼Œæ–‡åˆæçš„ Proxyã€Mybatis åŠ¨æ€ä»£ç†ç›¸å…³é—®é¢˜å·²å…¨éƒ¨ç­”ç–‘")]),s._v(" "),a("h2",{attrs:{id:"æŠ½è±¡ç±»èƒ½å¦-jdk-åŠ¨æ€ä»£ç†"}},[s._v("æŠ½è±¡ç±»èƒ½å¦ JDK åŠ¨æ€ä»£ç† "),a("a",{staticClass:"header-anchor",attrs:{href:"#æŠ½è±¡ç±»èƒ½å¦-jdk-åŠ¨æ€ä»£ç†"}},[s._v("#")])]),s._v(" "),a("p",[s._v("è¯´ä»£ç å‰ç»“è®ºå…ˆè¡Œï¼Œ"),a("strong",[s._v("ä¸èƒ½ï¼")])]),s._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("abstract")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("AbstractProxy")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("abstract")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sayHello")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("AbstractProxy")]),s._v(" proxyInterface "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("AbstractProxy")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Proxy")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("newProxyInstance")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n                "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ProxyTest")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("getClassLoader")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n                "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Class")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("AbstractProxy")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n                "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ProxyInvocationHandler")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nproxyInterface"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sayHello")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])])]),a("p",[s._v("æ¯«æ— ç–‘é—®ï¼ŒæŠ¥é”™æ˜¯å¿…ç„¶çš„ï¼ŒJDK æ˜¯ä¸èƒ½å¯¹ç±»è¿›è¡Œä»£ç†çš„")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://images-machen.oss-cn-beijing.aliyuncs.com/image-20210112133350848.png",alt:""}})]),s._v(" "),a("p",[s._v("å¸¦ç€å°ç–‘æƒ‘æˆ‘ä»¬çœ‹ä¸€ä¸‹ Proxy æºç æŠ¥é”™ä½ç½®ï¼ŒJDK åŠ¨æ€ä»£ç†åœ¨ç”Ÿæˆä»£ç†ç±»çš„è¿‡ç¨‹ä»£ç ä¸­ï¼Œä¼šæœ‰æ˜¯å¦æ¥å£éªŒè¯")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://images-machen.oss-cn-beijing.aliyuncs.com/image-20210112133513069.png",alt:""}})]),s._v(" "),a("p",[s._v("æŠ½è±¡ç±»ç»ˆå½’æ˜¯ç±»ï¼ŒåŠ ä¸ª abstract ä¹Ÿæˆä¸äº†æ¥å£ï¼ˆå°±åƒæˆ‘ï¼Œè™½ç„¶èƒ–äº† 60 æ–¤ï¼Œä½†ä¾ç„¶æ˜¯å¸…å“¥ï¼‰")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://images-machen.oss-cn-beijing.aliyuncs.com/%E5%98%BB%E5%98%BB%E5%98%BB.jpg",alt:""}})]),s._v(" "),a("p",[s._v("ä¸‹æ¬¡é¢è¯•å®˜å¦‚æœæœ‰é—®è¿™é—®é¢˜çš„ï¼Œ"),a("strong",[s._v("æ–©é’‰æˆªé“ä¸€ç‚¹")]),s._v("ï¼Œå°±æ˜¯ä¸èƒ½")]),s._v(" "),a("h2",{attrs:{id:"ç»“è¨€"}},[s._v("ç»“è¨€ "),a("a",{staticClass:"header-anchor",attrs:{href:"#ç»“è¨€"}},[s._v("#")])]),s._v(" "),a("p",[s._v("ç»“åˆ Mybatis ä½¿ç”¨ JDK åŠ¨æ€ä»£ç†ç›¸å…³çš„é—®é¢˜ï¼Œå±•å¼€äº†æ–‡ç« çš„è®²è¿°ï¼Œè¿™é‡Œæ€»ç»“ä¸‹")]),s._v(" "),a("p",[a("strong",[s._v("Qï¼šJDK åŠ¨æ€ä»£ç†èƒ½å¦å¯¹ç±»ä»£ç†ï¼Ÿ")])]),s._v(" "),a("blockquote",[a("p",[s._v("å› ä¸º JDK åŠ¨æ€ä»£ç†ç”Ÿæˆçš„ä»£ç†ç±»ï¼Œä¼šç»§æ‰¿ Proxy ç±»ï¼Œç”±äº Java æ— æ³•å¤šç»§æ‰¿ï¼Œæ‰€ä»¥æ— æ³•å¯¹ç±»è¿›è¡Œä»£ç†")])]),s._v(" "),a("p",[a("strong",[s._v("Qï¼šæŠ½è±¡ç±»æ˜¯å¦å¯ä»¥ JDK åŠ¨æ€ä»£ç†ï¼Ÿ")])]),s._v(" "),a("blockquote",[a("p",[s._v("ä¸å¯ä»¥ï¼ŒæŠ½è±¡ç±»æœ¬è´¨ä¸Šä¹Ÿæ˜¯ç±»ï¼ŒProxy ç”Ÿæˆä»£ç†ç±»è¿‡ç¨‹ä¸­ï¼Œä¼šæ ¡éªŒä¼ å…¥ Class æ˜¯å¦æ¥å£")])]),s._v(" "),a("p",[a("strong",[s._v("Qï¼šMybatis Mapper æ¥å£æ²¡æœ‰å®ç°ç±»ï¼Œæ€ä¹ˆå®ç°çš„åŠ¨æ€ä»£ç†ï¼Ÿ")])]),s._v(" "),a("blockquote",[a("p",[s._v("Mybatis ä¼šé€šè¿‡ "),a("code",[s._v("Class#forname")]),s._v(" å¾—åˆ° Mapper æ¥å£ Class å¯¹è±¡ï¼Œç”Ÿæˆå¯¹åº”çš„åŠ¨æ€ä»£ç†å¯¹è±¡ï¼Œæ ¸å¿ƒä¸šåŠ¡å¤„ç†éƒ½ä¼šåœ¨ "),a("code",[s._v("InvocationHandler#invoke")]),s._v(" è¿›è¡Œå¤„ç†")])]),s._v(" "),a("p",[s._v("å¸Œæœ›è¯»è¿‡çš„å°ä¼™ä¼´éƒ½èƒ½æœ‰æ‰€æ”¶è·ï¼Œå¦‚æœå¯¹äºæ–‡ç« å†…å®¹æœ‰æ‰€ç–‘æƒ‘ï¼Œå¯ä»¥é€šè¿‡ç•™è¨€æˆ–è€…æ·»åŠ ä½œè€…å¥½å‹çš„æ–¹å¼æ²Ÿé€šï¼Œç¥å¥½!")])])}),[],!1,null,null,null);t.default=e.exports}}]);